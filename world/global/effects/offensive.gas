//
//	Offensive spell scripts
//
//	Criteria:
//
//	1 - Is called by the use of scroll
//	2 - Does damage or combat related
//

[effect_script*]  // original RS modified MM maintaining ET
{
	name	=fireshot_base;  // This script supports three spells (1 == fireshot) (2 == firespray) (3 == firestorm)

	script	=[[
			///////////////////////////////////////////////////
			// create the trackball to base the whole effect on
			sfx create trackball #TARGET_KB 
				"must_update()ts(1.35)accel(0)color0(.33,.22,.11)dur(4)scale(.25)
				afterlife(.5)rvel_max(0)";
			set $trackball #POP;

			///////////////////////////////////////////////////
			// if we are calling this as part of the fireshot spell then we want to have the
			// model of a skull some times instead of just a ball. we also want some sparks.
			if ([1] == 1)
			{
				randrange 0 10;
				set $temp #POP;
				if ( $temp == 1 )
				{// if the random number generated is 1, basically a 1 in 10 chance.
					sfx create orbiter #TARGET 
						"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)
						itheta(0)model(frag_glb_bone_06)model_smax(1)model_sin(.2)
						model_sout(.1)rotate(90,0,0)rot_inc(0,1000,0)";
					set $skull #POP;
					sfx rat $skull;
					sfx target $skull $trackball;
					sfx attach $trackball $skull;
				} // if($temp == 1)

				////////////////////////////////////////////
				// create some sparks
				sfx create explosion #TARGET 
					"must_update()texture(b_sfx_fireball-01)radius(0)color0(1,.5,.25)
					color1(0,0,0)vmin(1)vmax(2)srate(.05)omni_dir()fade_range(0,1,0)
					scale(.25)ts(.66)ivel(0,1,0)dur(2.5)";
				set $spark #POP;


				///////////////////////////////////////////////////////////////
				// create a light source to light the ground as the shot moves
				sfx create lightsource #SOURCE 
					"must_update()color0(.75,.6,0)tin(.1)tout(.1)radius(2.5)dur(2.2)";
				set $big_light #POP;

				/////////////////////////////////////////////
				// link everything to the trackball
				sfx rat $spark;
				sfx target $spark $trackball;
				sfx attach $trackball $spark;

				sfx rat $big_light;
				sfx target $big_light $trackball;
				sfx attach $trackball $big_light;
			} // ([1] == 1)

			/////////////////////////////////////////////////
			// if we are using the firestorm spell we want the shots to come from the heavens.
			if ( [1] != 3 )
			{
				sfx position_at $trackball @weapon_bone source;
			}
			else
			{
				sound play s_e_spell_fire_rain_cast at #SOURCE_POSITION dist 1 40;
				sfx position_at $trackball @kill_bone source;
			} // ( [1] != 3 )


			///////////////////////////////////////////
			// this adds some variance to where the trackball is aiming
			sfx offset_bone $trackball [0] target;
			sfx freeze_targets $trackball;

			///////////////////////////////////////////////
			// create a fire effect with a blobby looking texture
			sfx create fire #SOURCE		
				"must_update()ts(2)count(10)scale(1.1)color0(1,.8,.6)alphafade(2.25)
				velocity(0,0,0)accel(0,0,0)min_displace(-1)max_displace(1)max_radius(2)
				texture(b_sfx_fireball-01)dur(3)";
			set $fire #POP;
			sfx rat $fire;

			/////////////////////////////////////////////
			// link everything to the trackball
			sfx target $fire $trackball;
			sfx start $fire;


			///////////////////////////////////////////////
			// create a fire effect with a blobby looking texture
			sfx create fire #SOURCE		
				"must_update()ts(2)count(25)scale(.5)color0(1,.4,.2)alphafade(.8)
				velocity(0,0,0)accel(0,0,0)min_displace(-1)max_displace(1)max_radius(7)
				texture(b_sfx_fireball-01)";
			set $fire2 #POP;
			sfx rat $fire2;

			/////////////////////////////////////////////
			// link everything to the trackball
			sfx target $fire2 $trackball;
			sfx start $fire2;


			//////////////////////////////////
			// you can pick your friends and you can pick your nose, but you
			// don't want to hit the in the back of the head with a fireball
			sfx friendly party $trackball;

			sfx start $trackball;
			
			sfx attach $trackball $fire2;

			waitfor collision $trackball #DEFAULT_TIMEOUT;
			set $collision_type #POP;

			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				if ([1] == 1)
				{
					get target_position $trackball target;
					sound play s_e_spell_fireshot_hit at #POP dist 3 30;
				}

				if ([1] == 2)
				{
					get target_position $trackball target;
					sound play s_e_spell_firespray_hit at #POP dist 3 30;
				}

				if ([1] == 3)
				{
					get target_position $trackball target;
					sound play s_e_spell_fire_rain_hit at #POP dist 3 30;
				}
			}


			if ( $collision_type == #OBJECT_COLLISION )
			{

				get collision target $trackball target;

				sfx create fire #TARGET_KB
					"must_update()ts(1.25)scale(.75)color0(1,.6,.3)color1(.1,.1,0)
					dur(.5)count(15)radius(.2)";
				sfx start #POP;

				sfx create lightsource #TARGET_KB
					"must_update()radius(1.5)color0(.75,.6,0)dur(1)tin(.2)
					tout(.1)";
				sfx start #POP;

				sfx create explosion #TARGET_KB
					"must_update()radius(0)texture(b_sfx_sparkle_02)color0(1,.6,.3)
					color1(0,.2,.2)ivel(0,.25,0)vmin(3)vmax(5)omni_dir()
					fade_range(0,1,0)scale(.3)";
				sfx start #POP;
			}


			if ( $collision_type == #TERRAIN_COLLISION )
			{

				get collision point $trackball target;

				sfx create fire #POP
					"must_update()ts(1.25)scale(.75)color0(1,.6,.3)color1(.1,.1,0)
					dur(.5)count(15)radius(.2)";
				sfx start #POP;

				get collision point $trackball target;

				sfx create lightsource #POP
					"must_update()radius(1.5)color0(.75,.6,0)dur(1)tin(.2)
					tout(.1)";
				sfx start #POP;

				get collision point $trackball target;

				sfx create explosion #POP
					"must_update()radius(0)texture(b_sfx_sparkle_02)color0(1,.6,.3)
					color1(0,.2,.2)ivel(0,.25,0)vmin(3)vmax(5)omni_dir()
					fade_range(0,1,0)scale(.3)";
				sfx start #POP;
			}

			///////////////////////////////////
			// clean up.

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // - ET
{
	name	=fireshot;

	script	=[[
			sound play s_e_spell_fireshot_cast at #SOURCE_POSITION dist 3 20;
			
			call fireshot_base v<0 0 0> u<1>;
			waitfor script #POP #DEFAULT_TIMEOUT;
						
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*]  // -ET
{
	name	=fireskull;

	script	=[[

			///////////////////////////////////////////////////
			// create the trackball to base the whole effect on
			sfx create trackball #TARGET_KB 
				"must_update()texture(b_sfx_sparkle01)delay(.66)
				ts(2)accel(0)color0(1,.3,0)dur(#DEFAULT_TIMEOUT)scale(2.1)afterlife(0)rvel_max(0)";

			sfx position_at #PEEK @weapon_bone source;
			set $trackball #POP;
			sfx friendly party $trackball;
			sfx start $trackball;

			sfx create orbiter #TARGET 
				"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)
				itheta(0)model(frag_glb_bone_06)model_smax(1.5)model_sin(1)
				model_sout(0)rotate(90,0,0)rot_inc(0,1000,0)";
			set $skull #POP;
			sfx rat $skull;
			sfx target $skull $trackball;
			sfx start $skull;

			sfx create charge #TARGET 
				"must_update()scale(2)radius(.5)texture(b_sfx_sparkle01)
				ts(2)dur(.5)color0(1,.3,0)";
			set $charge #POP;
			sfx rat $charge;
			sfx target $charge $trackball;
			sfx start $charge;


			///////////////////////////////////////////////
			// create a fire effect with a blobby looking texture
			sfx create fire #SOURCE
				"must_update()count(50)color0(1,.3,.2)ts(1.5)instant()velocity(0,0,0)
				accel(0,0,0)alphafade(1)scale(1.2)min_displace(-.675)
				max_displace(.675)texture(b_sfx_fireball-01)";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $trackball;
			sfx start $fire2;

			pause .27;

			sound play s_e_spell_fireshot_cast at #SOURCE_POSITION dist 3 20;

			waitfor collision $trackball #DEFAULT_TIMEOUT;
			set $collision_type #POP;
			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get collision point $trackball;
				sfx create lightsource #POP
					"radius(1.5)color0(1,.3,0)dur(1)tin(.2)tout(.1)";
				set $fire3 #POP;
				sfx start $fire3;

				get collision point $trackball;
				sfx create explosion #POP
					"must_update()omni_dir()ivel(0,1,0)vmin(3)vmax(5)ts(.6)
					texture(b_sfx_sparkle01)dur(3)color0(1,.3,0)color1(.15,.0875,0)
					count(45)";
				set $exp #POP;
				sfx start $exp;

				get target_position $exp target;
				sound play s_e_spell_fireshot_hit at #POP dist 3 30;

			}
			
			pause 2;
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*] // -ET
{
	name	=triple_strike;

	script	=[[
			sfx create orbiter #TARGET 
				"free()color0(.2,.2,1)radius(5)itheta(4)iphi(5)scale(.2)
				tin(.3)tout(1)phi(0)";
			set $orb #POP;
			sfx start $orb;

			sfx create linetracer #TARGET 
				"lock()tout(1)color0(0,0,.5)color1(.25,.25,.5)tin(.3)
				fade_rate(2.5)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx target #PEEK $orb;
			sfx offset_bone #PEEK v<0 0 .03> target;
			sfx offset_bone #PEEK v<0 0 -.03> source;
			sfx target #PEEK target;
			sfx start #POP;
			
			sfx create orbiter #TARGET 
				"free()color0(.2,.2,1)radius(5)itheta(4)iphi(5)scale(.2)
				tin(.3)tout(1)phi(2.08)";
			set $orb2 #POP;
			sfx start $orb2;

			sfx create linetracer #TARGET 
				"lock()tout(1)color0(0,0,.5)color1(.25,.25,.5)tin(.3)
				fade_rate(2.5)";
			sfx rat #PEEK;
			sfx target #PEEK $orb2;
			sfx target #PEEK $orb2;
			sfx offset_bone #PEEK v<0 0 .03> target;
			sfx offset_bone #PEEK v<0 0 -.03> source;
			sfx target #PEEK target;
			sfx start #POP;
			
			sfx create orbiter #TARGET 
				"free()color0(.2,.2,1)radius(5)itheta(4)iphi(5)scale(.2)
				tin(.3)tout(1)phi(4.19)";
			set $orb3 #POP;
			sfx start $orb3;

			sfx create linetracer #TARGET 
				"lock()tout(1)color0(0,0,.5)color1(.25,.25,.5)tin(.3)
				fade_rate(2.5)";
			sfx rat #PEEK;
			sfx target #PEEK $orb3;
			sfx target #PEEK $orb3;
			sfx offset_bone #PEEK v<0 0  .03> target;
			sfx offset_bone #PEEK v<0 0 -.03> source;
			sfx target #PEEK target;  
			sfx start #POP;
			
			sound play s_e_spell_triple_strike_cast at #TARGET_POSITION dist 3 25;
			]];
}

[effect_script*] // -ET
{
	name	=triple_strike_hit;

	script =[[

		sfx create orbiter #TARGET 
			"offset(0,1,0)texture(b_sfx_sparkle01)color0(0,0,.5)
			iphi(-6.28)radius(1)dur(.5)vdisplace(-4)";
		set $orb2 #POP;
		sfx start $orb2;

		sfx create orbiter #TARGET 
			"offset(0,1,0)texture(b_sfx_sparkle01)color0(.5,.25,.5)
			iphi(6.28)radius(1)radiusi(0)dur(.5)vdisplace(-4)";
		set $orb3 #POP;
		sfx start $orb3;

	  	sfx create linetracer #TARGET 
		  	"dur(3)color0(0,0,1)color1(.85,.25,.75)fade_rate(6)tout(.3)";
		set $line #POP;
		sfx rat $line;
		sfx target $line $orb3;
		sfx target $line $orb2;
		sfx start $line;
	  	]];
}

[effect_script*]  // -ET
{
	name	=killing_fist; // -ET

	script	=[[
			sound play s_e_spell_shock_wave_cast at #SOURCE_POSITION dist 5 30;

			set $scale .5;

			sfx create sray #SOURCE 
				"ts(5)offset(0,0,0)dur(.2)scale(.5)radius(.25)lmin(.75)
				lmax(1.75)color0(0,0,0)color1(.3,.3,.25)theta(0,0,0)
				phi(0,0,0)wsmin(0)wsmax(0)wemin(.1)wemax(.1)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;

			sfx create explosion #SOURCE 
				"dur(1)scale($scale)offset(0,0,0)color0(.2,.2,.15)color1(.0,.0,.0)
				omni_dir()";
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;

			sfx create fire #SOURCE 
				"scale($scale)dur(1)dark()grey_tex()color0(.3,.3,.3)
				color1(0,0,0)count(20)alphafade(.2)flamesize(6)max_radius(16)
				instant()velocity(0,2,0)accel(0,0,0)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;
			]];
}

[effect_script*]
{
	name	=zap;

	script	=[[
			sound play s_e_spell_zap_cast_SED at #SOURCE_POSITION dist 3 20;

			sfx create lightning #TARGET_KB 
				"must_update()scale(.75)bolt_life(1)mindisplace(-.15)maxdisplace(.15)
				color0(.7,.7,1)[0][1]";
			set $bolt #POP;
			sfx target $bolt source;
			sfx attach_point $bolt @weapon_bone source;
			sfx start $bolt;

			sfx create lightning #TARGET_KB 
				"must_update()scale(.75)bolt_life(1)mindisplace(-.15)maxdisplace(.15)
				color0(.8,1,.8)[1]";
			set $bolt2 #POP;
			sfx target $bolt2 source;
			sfx attach_point $bolt2 @weapon_bone source;
			sfx start $bolt2;

			sfx create explosion #TARGET_KB 
				"must_update()vmin(2)vmax(3)omni_dir()ivel(0,0,0)rvel(2,0,2)
				scale_range(0,.3,0)texture(b_sfx_sparkle01)color0(.5,.75,.75)
				color1(0,.25,.25)dur(2)radius(.4)fade_range(0,1,0)count(16)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET_KB 
				"must_update()srate(.01)vmin(2)vmax(3)omni_dir()ivel(0,0,0)
				rvel(2,0,2)scale_range(0,.3,0)texture(b_sfx_sparkle01)
				color0(.5,.75,.75)color1(0,.25,.25)dur(2)radius(.4)
				fade_range(0,1,0)count(16)[1]";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			]];
}

[effect_script*]
{
	name	=return_summoned;

	script	=[[
			sound play s_e_spell_return_summoned_cast at #SOURCE_POSITION dist 5 30;

			sfx create curve #SOURCE 
				"must_update()ts(16)size(.15)curvature(1.2)model(1)scale(.25)
				color0(.2,.2,.9)tlength(15)spacing(2)velocity(6)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			pause .15;

			sfx create curve #SOURCE 
				"must_update()ts(16)size(.15)curvature(1.2)model(1)scale(.35)
				color0(.4,.2,.8)tlength(15)spacing(2)velocity(6)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			pause .15;

			sfx create curve #SOURCE 
				"must_update()ts(16)size(.15)curvature(1.2)model(1)scale(.45)
				color0(.6,.3,.7)tlength(15)spacing(2)velocity(6)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			pause .15;

			sfx create curve #SOURCE 
				"must_update()ts(16)size(.15)curvature(1.2)model(1)scale(.55)
				color0(.8,.4,.6)tlength(15)spacing(2)velocity(6)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			pause .15;

			sfx create curve #SOURCE 
				"must_update()ts(16)size(.15)curvature(1.2)model(1)scale(.65)
				color0(1,.5,.5)tlength(15)spacing(2)velocity(6)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			pause .5;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // - ET
{
	name	=fireball;

	script	=[[

			sound play s_e_spell_fireball_cast at #SOURCE_POSITION dist 3 20;			

			call fireball_base v<0 0 0> u<1>;
			waitfor script #POP #DEFAULT_TIMEOUT;
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*]
{
	name	=fireball_base;

	script	=[[
			/////////////////////////////////////////
			// This is the main trackball for the effcect, everything is based off of this.
			sfx create trackball #TARGET_KB 
				"must_update()accel(0)dur(4)afterlife(2)scale(.45)ts(1.4)
				color0(1,.2,.1)";
			set $trackball #POP;

			////////////////////
			// choose a different starting point and sound depending on what we are.
			if ( [1] == 3 )
			{// firestorm
				sfx position_at $trackball @kill_bone source;
			}
			else 
			{// fireblast or fireball
				sfx position_at $trackball @weapon_bone source;
			}

			if ( [1] != 3 )
			{// firestorm
				//////////////////////////////////////////
				// Create a light to attach to our trackball
				sfx create lightsource #SOURCE 
					"must_update()color0(1,.3,.2)color1(.9,0,0)";
				set $firelight #POP;
				sfx rat $firelight;
				sfx target $firelight $trackball;
				sfx start $firelight;
			}

			//////////////////////////////////////////
			// create the flames, this is supposed to be a fireball after all.
			sfx create fire #SOURCE	
				"must_update()ts(2)count(20)scale(1.5)color0(1,.4,.3)alphafade(1)
				velocity(0,0,0)accel(0,0,0)min_displace(-.5)max_displace(.5)max_radius(4)
				flamesize(2)";
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx start $fire;

			sfx create fire #SOURCE	
				"must_update()color0(1,.5,.4)count(15)ts(1.5)alphafade(.75)
				scale(.55)min_displace(-.5)max_displace(.5)accel(0,0,0)
				velocity(0,0,0)max_radius(8)texture(b_sfx_fireball-01)";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $trackball;
			sfx start $fire2;

			// we don't wan't to hit our friends.
			sfx friendly party $trackball;
			
			///////////////////////////////////////////
			// this adds some variance to where the trackball is aiming
			sfx offset_bone $trackball [0] target;
			sfx freeze_targets $trackball;

			// lets this baby fly.
			sfx start $trackball;

			sfx attach $trackball $fire;

			
//			sound play s_e_spell_fireball_cast at #SOURCE_POSITION dist 3 20;

			waitfor collision $trackball #DEFAULT_TIMEOUT;

			set $collision_type #POP;
			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				////////////////////
				// choose a different sound and detail depending on what we are.

				if ( [1] == 1 )
				{// if we are a plain old fireball
					get target_position $trackball target;
					sound play s_e_spell_fireball_hit at #POP dist 3 20;
					set $scale .7;
					set $detail 20;
				}
				else
				{
					get target_position $trackball target;
					sound play s_e_spell_fireball_rain_hit at #POP dist 3 20;
					set $scale .4;
					set $detail 16;
				} // ( [1] == 1 )

				get collision point $trackball;
				sfx create cylinder #POP 
					"must_update()ts(2)offset(0,.05,0)scale($scale)texture(b_sfx_cyl_03)
					hp0(.2,.2,0)hp1(.2,.2,0)rp0(0,4,7)rp1(.75,4.75,8)tin(.10)tout(.5)dur(.35)
					color0(1,.4,.3)spin(15)segments($detail)";
				sfx start #POP;

				get collision point $trackball;
				sfx create cylinder #POP 
					"must_update()scale($scale)texture(b_sfx_cyl_03)hp0(.2,.2,0)hp1(.2,.2,0)
					rp0(0,3,4)rp1(.75,3.25,8)tin(.10)tout(.5)dur(.35)color0(1,.4,.3)spin(15)
					segments($detail)";
				sfx start #POP;

				get collision point $trackball;
				sfx create explosion #POP
					"must_update()radius(0)texture(b_sfx_snow_01)color0(1,.4,.3)color1(0,0,0)
					ivel(0,.25,0)vmin(6)vmax(8)omni_dir()fade_range(0,1,0)scale(.75)";
							
				sfx start #POP;

				//////////////////////////////////
				// create a little explosion where the ball hits.
				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()scale(.8)vmin(6)vmax(8)texture(b_sfx_snow_01)
					count(16)color0(1,.4,.3)rvel(3,1,3)";
				set $explosion #POP;

				//////////////////////////////////
				// some tracer lookin things
				//get collision point $trackball
				//sfx create sray -must_update()ts(5)offset(0,.5,0)dur(.3)scale($scale)radius(.5)lmin(2)lmax(3)color0(0,0,0)color1(.9,.3,.1)theta(0,0,0)phi(0,0,0)wsmin(0)wsmax(0)wemin(.1)wemax(.1) #POP
				//sfx start #POP

				////////////////////////////////////
				// create some light for the flames to give off.
				get collision point $trackball;
				sfx create lightsource #POP 
					"must_update()color0(.8,.5,.2)color1(.5,.2,.2)dur(2.5)";
				set $explodelight #POP;
				sfx start $explodelight;

				// create the fire in the center
				get collision point $trackball;
				sfx create orbiter #POP 
					"must_update()offset(0,.06,0)texture(b_sfx_sparkle01)
					scale(4)color0(1,.4,.3)radius(0)tin(0)tout(.2)dur(.2)";
				sfx start #POP;

				//////////////////////////////////////////////////////////////////////////
				// find out which way the ball hit and have the explosion go accordingly.
				get collision direction $trackball;
				sfx direction $explosion #POP;
				sfx start $explosion;


			}

			////////////////////////////
			// clean up
			sfx destroy $trackball;

			if ( [1] != 3 )
			{// firestorm
				sfx destroy $firelight;
			}
			
			pause 3;

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*]
{
	name	=flash;

	script	=[[
			sound play s_e_spell_iceshard_cast at #TARGET_POSITION dist 3 20;
					
			sfx create cylinder #TARGET_KB
				"must_update()ts(2)offset(0,.05,0)scale(.25)texture(b_sfx_cyl_03)
				hp0(0,0,0)hp1(0,0,0)rp0(0,4,7)rp1(.75,4.75,8)tin(.10)
				tout(.3)dur(.5)color0(.7,.7,1)spin(15)segments(14)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create cylinder #TARGET_KB
				"delay(.125)must_update()ts(2)offset(0,.05,0)scale(.2)texture(b_sfx_cyl_03)
				hp0(0,0,0)hp1(0,0,0)rp0(0,4,7)rp1(.75,4.75,8)tin(.10)
				tout(.3)dur(.38)color0(.7,.7,1)spin(15)segments(14)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create cylinder #TARGET_KB
				"delay(.25)must_update()ts(2)offset(0,.05,0)scale(.15)texture(b_sfx_cyl_03)
				hp0(0,0,0)hp1(0,0,0)rp0(0,4,7)rp1(.75,4.75,8)tin(.10)
				tout(.3)dur(.26)color0(.7,.7,1)spin(15)segments(14)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create explosion #TARGET_KB
				"must_update()radius(0)texture(b_sfx_snow_01)color0(.7,.7,1)
				color1(0,.1,.1)ivel(0,.25,0)vmin(6)vmax(8)omni_dir()
				fade_range(0,1,0)scale(.75)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET_KB
				"must_update()scale(.8)vmin(6)vmax(8)texture(b_sfx_snow_01)
				count(16)color0(.7,.7,1)rvel(3,1,3)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create lightsource #TARGET_KB
				"must_update()color0(.7,.7,1)color1(.7,.7,1)dur(2.5)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			// create the fire in the center
			sfx create orbiter #TARGET_KB
				"must_update()offset(0,.06,0)texture(b_sfx_sparkle01)
				scale(4)color0(.7,.7,1)radius(0)tin(0)tout(.2)dur(.2)";
//			sfx freeze_targets #PEEK;
			sfx start #POP;
			]];
}

[effect_script*]
{
	name	=spark;

	script	=[[
			sound play s_e_spell_spark_cast at #SOURCE_POSITION dist 3 20;

			frandrange 4 5; frandrange 3 4;
			call spark_base <accel(#POP)velocity(#POP)dir(.2,0,0)>;
			frandrange 4 5; frandrange 3 4;
			call spark_base <accel(#POP)velocity(#POP)dir(-.2,0,0)>;
			
			pause 5;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=spark_multi;

	script	=[[
			sound play s_e_spell_spark_multi_cast at #SOURCE_POSITION dist 3 25;

			frandrange 4 5; frandrange 3 4;
			call spark_base <accel(#POP)velocity(#POP)dir(.2,0,0)>;
			frandrange 4 5; frandrange 3 4;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,-.2)>;
			frandrange 4 5; frandrange 3 4;
			call spark_base <accel(#POP)velocity(#POP)dir(-.2,0,0)>;
			frandrange 4 5; frandrange 3 4;
			call spark_base <accel(#POP)velocity(#POP)dir(0,0,.2)>;

			pause 5;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*]
{
	name	=spark_base;

	script	=[[
			set $size .3;

			/////////////////////////////////////////
			// This is the main trackball for the effect, everything is based off of this.
			sfx create trackball #TARGET_KB 
				"texture(b_sfx_sparkle01)must_update()scale(1.65)color0(.5,.5,1)
				homing()damped()kdamp(.01)dur(#DEFAULT_TIMEOUT)afterlife(2)[0]";
			set $trackball #POP;
			sfx position_at $trackball @weapon_bone source;
			sfx friendly party $trackball;

			////////////////////////////////////////////
			//// Create a light to attach to our trackball
			sfx create lightsource #SOURCE 
				"must_update()color0(.5,.5,1)color1(0,0,1)";
			set $light #POP;
			sfx rat $light;
			sfx target $light $trackball;
			sfx attach $trackball $light;

			sfx create fire #SOURCE
				"texture(b_sfx_010)alphafade(4)must_update()count(6)
				color0(.5,.5,1)velocity(0,0,0)accel(0,0,0)flamesize(5)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx attach $trackball #PEEK;

			sfx create fire #SOURCE
				"must_update()count(30)color0(.5,.5,1)velocity(0,0,0)
				accel(0,0,0)flamesize(1)max_radius(7)";
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx attach $trackball $fire;

			sfx create fire #SOURCE
				"must_update()texture(b_sfx_sparkle01)count(10)color0(.5,.5,1)
				velocity(0,0,0)accel(0,-2,0)flamesize(3)";
			set $sparkle1 #POP;
			sfx rat $sparkle1;
			sfx target $sparkle1 $trackball;
			sfx attach $trackball $sparkle1;

			sfx create fire #SOURCE
				"must_update()texture(b_sfx_star_01)count(10)color0(.5,.5,1)
				velocity(0,0,0)accel(0,-2,0)flamesize(.1)max_radius(4)";
			set $sparkle2 #POP;
			sfx rat $sparkle2;
			sfx target $sparkle2 $trackball;
			sfx attach $trackball $sparkle2;

			sfx create fire #SOURCE
				"must_update()texture(b_sfx_star_02)count(10)color0(.5,.5,1)
				velocity(0,0,0)accel(0,-2,0)flamesize(1.25)";
			set $sparkle3 #POP;
			sfx rat $sparkle3;
			sfx target $sparkle3 $trackball;
			sfx attach $trackball $sparkle3;

			sfx start $trackball;

			waitfor collision $trackball #DEFAULT_TIMEOUT;

			set $collision_type #POP;

			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()texture(b_sfx_sparkle01)color0(.5,.5,1)
					radius(0)dur(2)omni_dir()";
				sfx start #POP;

				get target_position $trackball target;
				sound play s_e_spell_spark_hit at #POP dist 3 20;
			}

			sfx destroy $trackball;
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}


[effect_script*] // -ET
{
	name	=rage;

	script	=[[

			sound play s_e_spell_rage_cast at #SOURCE_POSITION dist 3 20;
			call rage_cross s<phi(0)>;
			pause .5;

			sound play s_e_spell_rage_cast at #SOURCE_POSITION dist 3 20;
			call rage_cross s<phi(0)>;
			pause .5;

			sound play s_e_spell_rage_cast at #SOURCE_POSITION dist 3 20;
			call rage_cross s<phi(0)>;
			pause .5;

			sound play s_e_spell_rage_cast at #SOURCE_POSITION dist 3 20;
			call rage_cross s<phi(0)>;
			pause .5;

			sound play s_e_spell_rage_cast at #SOURCE_POSITION dist 3 20;
			call rage_cross s<phi(0)>;

			waitfor script #POP #DEFAULT_TIMEOUT;
			
			sfx create orbiter #TARGET 
				"offset(0,1.5,0)color0(1,.6,.3)scale(.33)phi(0)iphi(8)
				radius(1)";
			sfx start #POP;
			
			sfx create orbiter #TARGET 
				"offset(0,1.5,0)color0(1,.45,.15)scale(.33)phi(2.09)iphi(8)
				radius(1)";
			sfx start #POP;

			sfx create orbiter #TARGET 
				"offset(0,1.5,0)color0(1,.3,0)scale(.33)phi(4.17)iphi(8)
				radius(1)";
			sfx start #POP;

			sfx create orbiter #TARGET 
				"offset(0,1.5,0)color0(1,.6,.3)scale(.33)phi(0)iphi(4)
				radius(1)";
			sfx start #POP;
			
			sfx create orbiter #TARGET 
				"offset(0,1.5,0)color0(1,.45,.15)scale(.33)phi(2.09)iphi(4)
				radius(1)";
			sfx start #POP;

			sfx create orbiter #TARGET 
				"offset(0,1.5,0)color0(1,.3,0)scale(.33)phi(4.17)iphi(4)
				radius(1)";
			sfx start #POP;



			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*] // -ET
{
	name	=rage_cross;

	script =[[

		sfx create orbiter #TARGET 
			"offset(0,-.5,0)color0(1,.3,0)scale(.33)
			iphi(-3.14)radius(2)dur(3)vdisplace(.4)[0]";
		set $orb2 #POP;
		sfx start $orb2;

		sfx create orbiter #TARGET 
			"offset(0,-.5,0)color0(1,.6,.3)scale(.33)
			iphi(4.71)radius(2)radiusi(0)dur(3)vdisplace(.5)[0]";
		set $orb3 #POP;
		sfx start $orb3;

	  	sfx create linetracer #TARGET 
		  	"dur(3)color0(1,.6,.2)color1(1,.3,0)fade_rate(6)tout(.3)";
		set $line #POP;
		sfx rat $line;
		sfx target $line $orb3;
		sfx target $line $orb2;
		sfx start $line;

	  	sfx create explosion #TARGET 
		  	"line()srate(.03)dur(3)color0(1,.6,.3)omni_dir()count(20)
		  	texture(b_sfx_sparkle01)";
		set $line2 #POP;
		sfx rat $line2;
		sfx target $line2 $orb3;
		sfx target $line2 $orb2;
		sfx start $line2;

		]];
}

[effect_script*] // -ET
{
	name	=oversight;

	script	=[[
			sfx create sray #TARGET 
				"instant()count(16)color0(.4,.7,0)color1(0,0,0)dur(1)
				lmin(0.8)lmax(0.8)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create flurry #TARGET
				"count(20)tin(.2)tout(1)dur(1.5)color0(.4,.7,0)grow_params(0,.8,1)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create orbiter #TARGET 
				"scale(.3)radius(1.5)phi(0)itheta(1)iphi(15)color0(.4,.7,0)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create orbiter #TARGET 
				"scale(.3)radius(1.5)phi(1)itheta(1)iphi(15)color0(.4,.7,0)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create orbiter #TARGET 
				"scale(.3)radius(1.5)phi(2)itheta(1)iphi(15)color0(.4,.7,0)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create orbiter #TARGET 
				"scale(.3)radius(1.5)phi(3)itheta(1)iphi(15)color0(.4,.7,0)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create orbiter #TARGET 
				"scale(.3)radius(1.5)phi(4)itheta(1)iphi(15)color0(.4,.7,0)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sound play s_e_spell_oversight_cast at #SOURCE_POSITION dist 3 20;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*]
{
	name	=flame_blades;

	script	=[[
			sound play s_e_spell_flame_blades_cast at #SOURCE_POSITION dist 3 20;

			sfx create trackball #TARGET_KB
				"velocity(8)invisible()
				color0(.3,.05,1)dur(#DEFAULT_TIMEOUT)afterlife(0)scale(.33)";
			sfx position_at #PEEK @weapon_bone source;
			sfx friendly party #PEEK;
			set $trackball #PEEK;
			sfx start $trackball;
			
			sfx create orbiter #TARGET 
				"itheta(0)iphi(9)radius(0.66)radiusi(0.1)scale(.45)color0(1,.5,.25)dur(6)
				tin(.05)free()";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			set $orb1 #PEEK;
			sfx start #POP;
			
			sfx create orbiter #TARGET 
				"itheta(0)iphi(9)radius(-0.66)radiusi(-0.1)scale(.45)color0(1,.5,.25)dur(6)
				tin(.05)free()";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			set $orb2 #PEEK;
			sfx start #POP;
			
			sfx create cylinder #TARGET
				"ts(1)scale(.5)tin(.2)tout(.8)texture(b_sfx_lightray01)alpha(1)
				hp1(0,0,0)hp0(0,0,0)spin(9)rp1(-.4,-.4,8)rp0(1,1,8)dur(2.5)
				color0(1,.2,.1)segments(15)";
			sfx rat #PEEK;
			sfx target #PEEK $orb1;
			sfx start #POP;
			
			sfx create cylinder #TARGET
				"ts(1)scale(.5)tin(.2)tout(.8)texture(b_sfx_lightray01)alpha(1)
				hp1(0,0,0)hp0(0,0,0)spin(9)rp1(-.4,-.4,8)rp0(1,1,8)dur(2.5)
				color0(1,.2,.1)segments(15)";
			sfx rat #PEEK;
			sfx target #PEEK $orb2;
			sfx start #POP;
			
			
			sfx create fire #TARGET
				"ts(2.2)scale(1.5)count(20)color0(1,.2,.1)color1(0,0,0)line()
				alphafade(.75)velocity(0,0,0)accel(0,0,0)flamesize(3)max_displace(.8)
				min_displace(-.8)max_radius(8)texture(b_sfx_fireball-01)";
			sfx rat #PEEK;
			sfx target #PEEK $orb1;
			sfx target #PEEK $orb2;
			sfx start #POP;
						
			waitfor collision $trackball #DEFAULT_TIMEOUT;

			set $collision_type #POP;

			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get collision point $trackball;
				
				sfx create flurry #POP 
					"iphi(3)radius(.5)count(15)dur(.75)color0(1,.35,0)
					grow_params(0,1.2,1.5)itheta(0)iamp(1)amplitude(1)scale(2)";
				sfx attach_point #PEEK @body_mid target;
				sfx start #POP;
			
				get collision point $trackball;
			
				sfx create explosion #POP 
					"count(30)ts(.66)color0(1,.45,.25)radius(0)vmin(4)vmax(5)
					omni_dir()dur(1.2)scale(1.5)fade_range(1,1,0)ivel(0,1,0)
					texture(b_sfx_sparkle01)";
				set $explosion #POP;
				sfx start $explosion;
				
				get collision point $trackball;
			
				sfx create spe #POP 
					"color0(1,.45,.25)texture(b_sfx_sparkle01)radius(.6)scale(.3)
					count(15)dur(.6)index0(0,1.57,1.57)index1(0,1.57,1.57)
					speed0(5,1,5)speed1(5,1,5)space0(.2512,.05024,.2512)
					space1(.2512,.05024,.2512)ts(4)";
				sfx start #POP;
				
				
				get collision point $trackball;
			
				sfx create cylinder #POP
					"ts(1)scale(1.5)tin(.2)tout(.8)texture(b_sfx_lightray01)alpha(1)
					hp1(.2,.2,0)hp0(.2,.2,0)spin(9)rp1(-.4,-.4,8)rp0(1,1,8)dur(.5)
					color0(1,.2,.1)segments(15)";
				sfx start #POP;
			}

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*]
{
	name	=fire_spray;

	script	=[[	///////////////////////////////////////////////////////////////////////////////
			// we call the base fireshot with some random offsets to make it shoot in a fan.
			sound play s_e_spell_firespray_cast at #SOURCE_POSITION dist 3 20;

			set $offset 1.5;

			frandrange f<-$offset> f<$offset>; frandrange f<-$offset> f<$offset>;
			frandrange f<-$offset> f<$offset>; frandrange f<-$offset> f<$offset>;
			frandrange f<-$offset> f<$offset>; frandrange f<-$offset> f<$offset>;
			frandrange f<-$offset> f<$offset>; frandrange f<-$offset> f<$offset>;
			frandrange f<-$offset> f<$offset>; frandrange f<-$offset> f<$offset>;
			
			call fireshot_base v<#POP 0 #POP> u<2>;
			set $shot1 #POP;

			call fireshot_base v<#POP 0 #POP> u<2>;
			set $shot2 #POP;

			call fireshot_base v<#POP 0 #POP> u<2>;
			set $shot3 #POP;

			call fireshot_base v<#POP 0 #POP> u<2>;
			set $shot4 #POP;

			call fireshot_base v<#POP 0 #POP> u<2>;
			set $shot5 #POP;

			pause 5;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}
[effect_script*]
{
	name	=polymorph;

	script	=[[
			sound play s_e_spell_polymorph_cast at #TARGET_POSITION dist 3 25;
			
			set $speed 20;
			set $fade .6;
			set $off .2;

			sfx create trackball #TARGET_KB 
				"must_update()invisible()scale(.4)color0(.5,.5,1)homing()
				dur(#DEFAULT_TIMEOUT)afterlife(2)accel(2)velocity(4)spin(2)radius(.4)";
			set $trackball #POP;
			sfx position_at $trackball @weapon_bone source;
			sfx friendly party $trackball;

			sfx create fire #TARGET 
				"must_update()color0(1,0,0)color1(0,0,0)alphafade($fade)
				max_radius(0)dur(5)scale(1)count(20)max_displace(0)
				velocity(0,10,0)offset(0,$off,0)accel(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()color0(.8,.2,.1)color1(0,0,0)alphafade($fade)
				max_radius(0)dur(5)scale(1)count(20)max_displace(0)
				velocity(10,0,0)offset($off,0,0)accel(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()color0(.6,.4,.2)color1(0,0,0)alphafade($fade)
				max_radius(0)dur(5)scale(1)count(20)max_displace(0)
				velocity(0,-10,0)offset(0,-$off,0)accel(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()color0(.4,.6,.3)color1(0,0,0)alphafade($fade)
				max_radius(0)dur(5)scale(1)count(20)max_displace(0)
				velocity(-10,0,0)offset(-$off,0,0)accel(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()color0(.2,.8,.2)color1(0,0,0)alphafade($fade)
				max_radius(0)dur(5)scale(1)count(20)max_displace(0)
				velocity(0,0,10)offset(0,0,$off)accel(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()color0(0,1,.4)color1(0,0,0)alphafade($fade)
				max_radius(0)dur(5)scale(1)count(20)max_displace(0)
				velocity(0,0,-10)offset(0,0,-$off)accel(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx start $trackball;

			waitfor collision $trackball #DEFAULT_TIMEOUT;

			set $collision_type #POP;

			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get collision point $trackball;

				sfx create explosion #POP 
					"must_update()omni_dir()vmin(3)vmax(5)scale_range(0,.5,0)
					texture(b_sfx_sparkle01)color0(0,0,0)color1(1,1,.5)ivel(0,1,0)
					dur(2)radius(.4)fade_range(0,1,0)count(25)scale(1.5)ts(.2)";
				sfx freeze_targets #PEEK;
				sfx start #POP;
				
				get collision point $trackball;

				sfx create explosion #POP 
					"must_update()omni_dir()vmin(3)vmax(5)scale_range(0,.5,0)
					color0(0,0,0)color1(1,1,.5)dur(2)radius(.4)fade_range(0,1,0)
					count(25)scale(1.5)ivel(0,1,0)";
				sfx freeze_targets #PEEK;
				sfx start #POP;
				
				get collision point $trackball;

				sfx create explosion #POP 
					"must_update()omni_dir()vmin(3)vmax(5)scale_range(0,.5,0)
					texture(b_sfx_sparkle01)color0(0,0,0)color1(1,1,.5)ivel(0,1,0)
					dur(2)radius(.4)fade_range(0,1,0)count(25)scale(1.5)ts(.2)offset(0,1,0)";
				sfx snap_to_ground #PEEK;
				sfx start #POP;
				
				get collision point $trackball;

				sfx create explosion #POP 
					"must_update()omni_dir()vmin(3)vmax(5)scale_range(0,.5,0)
					color0(0,0,0)color1(1,1,.5)dur(2)radius(.4)fade_range(0,1,0)
					count(25)scale(1.5)ivel(0,1,0)offset(0,1,0)ts(.2)";
				sfx snap_to_ground #PEEK;
				sfx start #POP;
				
				get collision point $trackball;

				sfx create spe #POP
					"offset(0,1,0)index0(0,1.57,1.57)speed0(0,-2,0)speed1(0,-2,0)
					radius(1.3)color0(.08,.02,.01)dur(2)tin(0)";
				sfx snap_to_ground #PEEK;
				sfx start #POP;				

				get collision point $trackball;
               
				sfx create spe #POP
					"offset(0,1,0)index0(0,-1.57,1.57)speed0(0,2,0)speed1(0,2,0)
					radius(1.3)color0(.02,.08,.02)dur(2)ts(1)tin(0)";
				sfx snap_to_ground #PEEK;
				sfx start #POP;
				
				get collision point $trackball;

				sfx create cylinder #POP
					"hp1(0,0,0)hp0(1,2,2)texture(b_sfx_lightray01)color0(.8,.2,.1)
					spin(1)dur(2)alpha(.2)rp0(1.2,4,1)rp1(1.2,1.2,0)";
				sfx snap_to_ground #PEEK;
				sfx start #POP;				

				get collision point $trackball;
               
				sfx create cylinder #POP
					"hp1(0,0,0)hp0(1,2,2)texture(b_sfx_lightray01)color0(.2,.8,.2)
					spin(-1)dur(2)alpha(.2)rp0(1,3,.66)rp1(1,1,0)";
				sfx snap_to_ground #PEEK;
				sfx start #POP;
				
			}

			sfx destroy $trackball;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=laser_minor;

	script	=[[
			sound play s_e_spell_light_ray_cast at #TARGET_POSITION dist 5 25;

			set $color 1,1,.8;

			sfx create orbiter #SOURCE 
				"must_update()scale(1.6)tin(0)tout(1)color0($color)radius(0)
				bone_orient()[1]";
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;

			sfx create orbiter #SOURCE 
				"must_update()texture(b_sfx_sparkle01)scale(1.6)tin(0)
				tout(1)color0($color)radius(0)bone_orient()[1]";
			sfx attach_point #PEEK @weapon_bone target;
			set $orb #POP;

			// Create the lightning using the second target supplied to the script
			sfx create lightning #TARGET_KB 
				"must_update()subd(0)minsubd(4)scale(1)subd(.01)minsubd(.01)
				mindisplace(0)maxdisplace(0)ts(1)color0($color)[0][1]";
			sfx target #PEEK $orb;
			sfx attach $orb #POP;
			
			sfx create fire #TARGET_KB 
				"must_update()scale(.4)velocity(0,20,0)accel(0,-20,0)
				line()color0($color)color1(0,0,0)count(50)min_displace(0)
				max_displace(0)flamesize(2)[1]";
			sfx target #PEEK $orb;
			sfx attach $orb #POP;

			// Shoot
			sfx start $orb;

			pause .2;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*]
{
	name	=laser_major;

	script	=[[
			sound play s_e_spell_sun_ray_cast at #TARGET_POSITION dist 8 35;

			set $color 1,1,.8;

			sfx create cylinder #SOURCE
			"must_update()alpha(.4)hp0(0,-3,-1)hp1(20,8,-1)rp1(0,0,0)
			rp0(1,0,-1)dur(1)texture(b_sfx_lightray_01)spin(2)color0($color)";
			
				
			sfx start #POP;
			sfx create cylinder #SOURCE
			"must_update()alpha(.4)hp0(0,-3,-1)hp1(20,8,-1)rp1(0,0,0)
			rp0(1,0,-1)dur(1)texture(b_sfx_lightray_02)spin(-1)
			color0($color)";
			
				
			sfx start #POP;

			pause .3;

			sfx create orbiter #SOURCE 
				"must_update()offset(0,1,0)scale(2.6)tin(0)tout(1)color0($color)
				radius(0)[1]";
			sfx attach_point #PEEK @body_anterior target;
			set $orb #POP;

			sfx create orbiter #SOURCE 
				"must_update()texture(b_sfx_sparkle01)offset(0,1,0)scale(2.6)
				tin(0)tout(.1)color0($color)radius(0)[1]";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			// Create the lightning using the second target supplied to the script
			sfx create lightning #TARGET_KB 
				"must_update()subd(0)minsubd(4)scale(2)subd(.01)minsubd(.01)
				mindisplace(0)maxdisplace(0)ts(1)color0($color)[0][1]";
			sfx target #PEEK $orb;
			sfx attach $orb #POP;
			

			sfx create fire #TARGET_KB 
				"must_update()scale(.2)velocity(0,20,0)accel(0,-20,0)
				line()color0($color)color1(0,0,0)count(50)min_displace(0)
				max_displace(0)flamesize(2)[1]";
			sfx target #PEEK $orb;
			sfx attach $orb #POP;

			// Shoot
			sfx start $orb;

			pause .3;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*] // - ET
{
	name	=firebomb;

	script	=[[
			///////////////////////////////////////
			// all we do is call the base firebomb
			call firebomb_base v<0 0 0> u<1>;
			waitfor script #POP #DEFAULT_TIMEOUT;
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // - ET
{
	name	=firebomb_base;

	script	=[[
	
			sfx create orbiter #TARGET_KB 
				"radius(0)dur(10)invisible()";
			sfx snap_to_ground #PEEK;              
			set $orb #PEEK;
			sfx start #POP;  
			
			pause .01;                                     
	        
			/////////////////////////////////////////
			// This is the main trackball for the effect, everything is based off of this.
			sfx create trackball #TARGET_KB 
				"must_update()dir(0,1,0)dur(#DEFAULT_TIMEOUT)afterlife(2)scale(.45)
				ts(1.4)homing()damped()kdamp(0)accel(1)color0(1,.4,.2)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			set $trackball #POP;
			sfx position_at $trackball @weapon_bone source;
			sfx offset_bone $trackball [0] target;
//			sfx freeze_targets $trackball;
			sfx friendly party $trackball;
			sfx start $trackball;
			
			pause .01;                                     
	        
			////////////////////
			// choose a different starting point if we are fireball storm.
			if ( [1] == 3 )
			{
				sfx position_at $trackball @kill_bone source;
			}
			else
			{
				sfx position_at $trackball @weapon_bone source;
			} // ( [1] == 3 )

			//////////////////////////////////////////
			// Create a light to attach to our trackball
			sfx create lightsource #SOURCE 
				"must_update()color0(1,.4,.2)color1(.9,0,0)";
			set $firelight #POP;
			sfx rat $firelight;
			sfx target $firelight $trackball;
			sfx start $firelight;


			//////////////////////////////////////////
			// create the flames, the is supposed to be a fireball after all.
			sfx create fire #SOURCE
				"must_update()count(20)color0(1,.5,.3)ts(1.5)
				velocity(0,0,0)accel(0,0,0)alphafade(1)scale(.5)max_radius(10)
				min_displace(-1)max_displace(1)bone_orient()texture(b_sfx_fireball-01)";	
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx start $fire;
			

			sfx create fire #SOURCE
				"must_update()count(30)color0(1,1,1)ts(2.5)
				velocity(0,0,0)accel(0,0,0)alphafade(1)scale(1.33)max_radius(3)
				min_displace(-1)max_displace(1)bone_orient()texture(b_sfx_fireball-02)";	
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $trackball;
			sfx start $fire2;
			
			sound play s_e_FBfireball_launch at #SOURCE_POSITION dist 3 20;
			waitfor collision $trackball #DEFAULT_TIMEOUT;
			
			set $collision_type #POP;
			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get target_position $trackball target;
				sound play s_e_FBfireball_hit at #POP dist 3 20;
				
				if ( [1] == 1 )
				{// if we are a plain old fireball
					set $scale .7;
					set $detail 20;
				}
				else
				{
					set $scale .4;
					set $detail 16;
				} // ( [1] == 1 )
	
				frandrange 10 40; frandrange 10 40; set $r1a #POP; set $r2a #POP;
				frandrange 10 40; frandrange 10 40; set $r1b #POP; set $r2b #POP;
				frandrange 10 40; frandrange 10 40; set $r1c #POP; set $r2c #POP;
	
				get collision point $trackball;
				sfx create sphere #POP 
					"must_update()scale($scale)color0(1,.5,.1)dur(.5)tin(.2)
					tout(.5)irotate($r1a,$r1b,$r1c)grow_params(.1,1.5,3)";
				sfx start #POP;
	
				get collision point $trackball;
				sfx create sphere #POP 
					"must_update()scale($scale)color0(1,.5,.1)dur(.5)tin(.2)
					tout(.5)irotate($r2a,$r2b,$r2c)grow_params(.1,1.5,3)";
				sfx start #POP;
	
				get collision point $trackball;
				sfx create cylinder #POP 
					"must_update()scale($scale)texture(b_sfx_cyl_03)hp0(.1,.1,.1)
					hp1(.1,.1,.1)rp0(0,8,5)rp1(.75,8.75,8)tin(.20)tout(.5)
					dur(.65)color0(1,.6,.1)spin(15)segments($detail)";
				sfx start #POP;
	
				//////////////////////////////////
				// create a little explosion where the ball hits.
				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()count($detail)color0(1,.5,.2)rvel(8,0,8)
					vmin(2)vmax(4)";
				sfx start #POP;
	
				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()count($detail)color0(1,.5,.2)rvel(8,0,8)
					texture(b_sfx_sparkle01)vmin(2)vmax(4)";
				sfx start #POP;
	
				get collision point $trackball;
				sfx create flurry #POP
					"must_update()count(30)tin(0)tout(.5)dur(0.5)color0(1,.6,.1)
					grow_params(-.3,1.4,1.7)scale(1.35)delay(.07)";
				sfx start #POP;
	
				//////////////////////////////////
				// some tracer lookin things
				get collision point $trackball;
				sfx create sray #POP 
					"must_update()count($detail)ts(5)offset(0,.5,0)dur(.2)
					scale($scale)radius(.5)lmin(2)lmax(5)color0(0,0,0)color1(.9,.6,.1)
					theta(0,0,0)phi(0,0,0)wsmin(0)wsmax(0)wemin(.1)wemax(.1)";
				sfx start #POP;
				
				////////////////////////////
				// clean up
				sfx destroy $trackball;
			}
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
						
			]];
}


[effect_script*] // -ET
{
	name	=firestorm;

	script	=[[
			///////////////////////////
			// calls the base fireshot
			sound play s_e_spell_fire_rain_cast at #SOURCE_POSITION dist 5 30;
			
			call fireshot_base v<0 0 0> u<3>;
			waitfor script #POP #DEFAULT_TIMEOUT;

			]];
}

[effect_script*]
{
	name	=lightning;

	script	=[[
			sound play s_e_spell_lightning_cast at #SOURCE_POSITION dist 1 30;

			//////////////////////////////////////////////////////////////
			// create three lightning bolts, and string the between the target and the source.
			sfx create lightning #TARGET_KB 
				"must_update()bolt_life(1)mindisplace(-.1)maxdisplace(.1)
				color0(.6,.6,1)[1][0]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()bolt_life(1)mindisplace(-.1)maxdisplace(.1)
				color0(.8,.6,1)[1]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()bolt_life(1)mindisplace(-.1)maxdisplace(.1)
				color0(.6,.8,1)[1]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()omni_dir()ivel(0,0,0)rvel(3,0,3)scale_range(0,.5,0)
				texture(b_sfx_sparkle01)color0(.7,.7,1)color1(.1,.1,0)
				dur(2)radius(.4)fade_range(0,1,0)count(25)";
			sfx start #POP;
			]];
}

[effect_script*]
{
	name	=chain_lightning;

	script	=[[
			sfx create orbiter #SOURCE_KB 
				"must_update()color0(.6,.6,1)radius(0)[1]";
			set $orb #POP;
			sfx start $orb;

			sfx create lightning #TARGET_KB 
				"must_update()offset(0,.2,0)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(.6,.6,1)[1][0]";
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()offset(0,.2,0)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(.8,.6,1)[1]";
			sfx target #PEEK $orb;
			sfx start #POP;
			]];
}

[effect_script*]
{
	name	=chain_lightning_caster;

	script	=[[
			sound play s_e_spell_lightning_cast at #SOURCE_POSITION dist 2 30;

			sfx create explosion #SOURCE 
				"must_update()omni_dir()ivel(0,0,0)rvel(3,0,3)scale_range(0,.5,0)
				texture(b_sfx_sparkle01)color0(.7,.7,1)color1(.1,.1,0)
				dur(2)radius(.4)fade_range(0,1,0)count(25)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;
			
			sfx create orbiter #SOURCE 
				"must_update()color0(.6,.6,1)radius(0)[1]";
			set $orb #POP;
			sfx attach_point $orb @weapon_bone target;
			sfx start $orb;

			sfx create lightning #SOURCE 
				"must_update()offset(0,.2,0)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(.6,.6,1)[1][0]";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			sfx create lightning #SOURCE 
				"must_update()offset(0,.2,0)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(.8,.6,1)[1]";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx target #PEEK target;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;
			
			]];
}

[effect_script*]
{
	name	=lightning_blast;

	script	=[[
			sound play s_e_spell_lightning_blast_cast at #SOURCE_POSITION dist 3 30;

			//////////////////////////////////////////////////////////////
			// create three lightning bolts, and string the between the target and the source.

			sfx create lightning #TARGET_KB 
				"must_update()scale(2)bolt_life(1)subd(.01)minsubd(.01)
				mindisplace(0)maxdisplace(0)color0(.6,.6,1)[1][0]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()ts(.2)scale(1.5)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(.6,1,.6)[1]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()ts(.2)scale(1.5)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(.6,1,1)[1]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create lightning #TARGET_KB 
				"must_update()ts(.2)scale(1.5)bolt_life(1)mindisplace(-.1)
				maxdisplace(.1)color0(1,1,1)[1]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @weapon_bone source;
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()omni_dir()ivel(0,0,0)rvel(3,0,3)scale_range(.5,1,0)
				texture(b_sfx_sparkle01)color0(.4,.7,.7)color1(0,.3,.3)
				dur(2)radius(.4)fade_range(0,1,0)count(25)";
			sfx start #POP;

			pause .4;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=lightning_bolt_charge;

	script	=[[
			sound play s_e_spell_lightning_bolt_cast at #SOURCE_POSITION dist 3 30;
			
			sfx create orbiter #SOURCE 
				"must_update()color0(.5,.5,1)offset(0,1,0)radius(0)scale(1)
				dur(11)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create charge #SOURCE 
				"must_update()texture(b_sfx_sparkle01)count(32)color0(.5,.5,1)
				offset(0,1,0)radius(1)scale(1)dur(9)centersize(2.1)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create sray #SOURCE 
				"must_update()count(16)color0(.5,.5,1)color1(0,0,0)offset(0,1,0)
				dur(11)lmin(0.8)lmax(0.8)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;


           	]];
}

[effect_script*]
{
	name	=lightning_bolt;

	script	=[[
			sfx create lightning #TARGET_KB 
				"must_update()scale(2)color0(.5,.5,1)mindisplace(-.1)
				maxdisplace(.1)[0][1]";
			sfx target #PEEK source;
			sfx attach_point #PEEK @body_anterior source;
			sfx offset_bone #PEEK v<0 1 0> source;
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()texture(b_sfx_sparkle01)srate(.001)count(8)
				ts(1)color0(.5,.5,1)color1(0,0,0)radius(.3)vmin(4)vmax(5)
				omni_dir()scale(1.6)fade_range(.5,1,0)[1]";
			sfx start #POP;

           	sfx create explosion #TARGET 
	           	"must_update()texture(b_sfx_sparkle01)count(8)ts(1)color0(.5,.5,1)
	           	color1(0,0,0)radius(.3)vmin(4)vmax(5)omni_dir()scale(1.6)
	           	fade_range(.5,1,0)[1]";
			sfx start #POP;
           	]];
}
[effect_script*]
{
	name	=earthquake;

	script	=[[
			sound play s_e_spell_tremor_cast at #TARGET_POSITION dist 10 30;
			
			sfx create orbiter #TARGET
				"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)offset(0,20,0)
				itheta(0)model(fist_glb_stone)model_smax(1)model_sin(.2)vdisplace(-60)
				model_sout(.1)rotate(270,0,0)rot_inc(0,0,0)";
			sfx start #POP;
			
			pause 0.33;
			
			sfx create explosion #TARGET
			"offset(0,0.1,0)texture(b_sfx_rock_single_01)dir(0,1,0)rvel(10,2,10)
			color0(.2,.2,.2)color1(0,0,0)dark()dur(4)count(40)collide()ts(1.4)";		
			sfx snap_to_ground #PEEK;
			sfx start #POP;
			
			sfx create cylinder #TARGET
			"texture(b_sfx_cyl_03)offset(0,0,0)hp0(.2,.6,.7)hp1(0,0,0)
			rp0(1,8,12)rp1(2,9,12)tin(.20)tout(.5)dur(.65)color0(.3,.3,.25)
			spin(15)segments(22)scale(1.2)";
			sfx snap_to_ground #PEEK;
			sfx start #POP;

			sfx create cylinder #TARGET
			"texture(b_sfx_cyl_03)offset(0,0,0)hp0(.2,.6,.7)hp1(0,0,0)
			rp0(1,8,8)rp1(2,9,8)tin(.20)tout(.5)dur(.75)color0(.3,.3,.25)
			spin(15)segments(22)scale(1.2)";
			sfx snap_to_ground #PEEK;
			sfx start #POP;

			sfx create cylinder #TARGET
			"texture(b_sfx_cyl_03)offset(0,0,0)hp0(.2,.6,.7)hp1(0,0,0)
			rp0(1,8,4)rp1(2,9,4)tin(.20)tout(.5)dur(.85)color0(.3,.3,.25)
			spin(15)segments(22)scale(1.2)";
			sfx snap_to_ground #PEEK;
			sfx start #POP;		
			
			camerashake camera_stomp s<frequency=40&magnitude_x=0.0&magnitude_y=0.6&magnitude_z=0.0&duration=1&epicenter=#TARGET_GOID>;
			
			pause 3;
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=malign;

	script =[[
			sound play s_e_spell_curse_cast at #TARGET_POSITION dist 10 30;

			set $texture b_sfx_moon_01;
			set $height1 -1;
			set $height2 1;
			set $detail 20;
			set $duration 3;
			set $radius1 1;
			set $radius2 1;
			set $speed 2;
			set $scale .4;
			set $spin 4;

	        // red orange
			set $color0 1,.5,0;
	        set $color1 1,.4,0;
	        set $color2 1,.3,0;
	        set $color3 1,.2,0;
	        set $color4 1,.1,0;
	        set $color5 1,.05,0;
	        set $color6 1,0,0;
	       	set $color7 1,.5,0;
	        set $color8 1,.15,0;
	        set $color9 1,.25,0;
	        set $color10 1,.35,0;
	        set $color11 1,.45,0;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color0)spin($spin)segments($detail)
				bone_orient()irotate(10,0,180)rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color2)spin($spin)segments($detail)
				bone_orient()irotate(30,0,180)rotate(60,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color4)spin($spin)segments($detail)
				bone_orient()irotate(50,0,180)rotate(120,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color6)spin($spin)segments($detail)
				bone_orient()irotate(70,0,180)rotate(180,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color8)spin($spin)segments($detail)
				bone_orient()irotate(90,0,180)rotate(240,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color10)spin($spin)segments($detail)
				bone_orient()irotate(110,0,180)rotate(300,0,0)";
			sfx start #POP;

			pause $duration;

			set $height3 -1;
			set $height4 1;
			set $detail2 8;
			set $radius3 1;
			set $radius4 1;
			set $speed2 2;
			set $scale2 .4;
			set $spin2 4;

			sfx create orbiter #TARGET 
				"offset(0,1.5,0)radius(0)invisible()";
			set $orb #POP;
			sfx start $orb;


			sfx create cylinder #TARGET 
				"scale($scale2)texture($texture)alpha(.3)hp0($height3,$height3,0)
				hp1($height4,$height4,1)rp0($radius3,$radius3,0)rp1($radius4,$radius4,0)
				tin(.2)tout(1.5)color0($color0)spin($spin2)segments($detail2)
				bone_orient()irotate(10,0,180)rotate(0,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale2)texture($texture)alpha(.3)hp0($height3,$height3,0)
				hp1($height4,$height4,1)rp0($radius3,$radius3,0)rp1($radius4,$radius4,0)
				tin(.2)tout(1.5)color0($color4)spin($spin2)segments($detail2)
				bone_orient()irotate(50,0,180)rotate(120,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale2)texture($texture)alpha(.3)hp0($height3,$height3,0)
				hp1($height4,$height4,1)rp0($radius3,$radius3,0)rp1($radius4,$radius4,0)
				tin(.2)tout(1.5)color0($color8)spin($spin2)segments($detail2)
				bone_orient()irotate(90,0,180)rotate(240,0,0)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

		]];
}


[effect_script*]  // - ET
{
	name	=blaster_base;

	script	=[[
			set $offset [0];
			
			sfx create orbiter #SOURCE 
				"offset($offset)radius(0)dur(5)invisible()";
			set $reference_point #POP;
			sfx start $reference_point;
			
			pause .1;
 			
 			//////////////////////////////////////////////////////////
 			// create a trackball with a little variation in the color.
 			sfx create trackball #TARGET_KB 
 				"must_update()color0(1,.65,.1)dur(#DEFAULT_TIMEOUT)rvel_max(0)scale(.25)
 				accel(3)";
 			sfx rat #PEEK;
 			sfx target #PEEK $reference_point;
 			set $trackball #POP;
 			sfx position_at $trackball @weapon_bone source;
 			sfx friendly party $trackball;
 			sfx start $trackball;
 			
 			sfx create fire #SOURCE		
				"must_update()ts(2)count(25)scale(.5)color0(1,.45,.2)alphafade(.66)
				velocity(0,0,0)accel(0,0,0)min_displace(-1)max_displace(1)max_radius(7)
				texture(b_sfx_fireball-01)";
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx start $fire;
 
 			waitfor collision $trackball #DEFAULT_TIMEOUT;
 			set $collision_type #POP;
 		
			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
 			{
 				get target_position $trackball target;
				sound play s_e_spell_fireshot_hit at #POP dist 3 30;
				
				get collision point $trackball target;
				sfx create explosion #POP
					"must_update()radius(0)texture(b_sfx_sparkle_02)color0(1,.6,.3)
					color1(0,.2,.2)ivel(0,.25,0)vmin(3)vmax(5)omni_dir()
					fade_range(0,1,0)scale(.3)count(16)";
				sfx start #POP;
 			}
			]];
}

[effect_script*]  // - ET
{
	name	=blaster;

	script	=[[
			sound play s_e_spell_fireshot_cast at #SOURCE_POSITION dist 3 25;
	
			////////////////////////////////////////
			// shoot lots o shots really quickly.

			call blaster_base s<0,0,15>; 
			call blaster_base s<.75,1,15>;
			call blaster_base s<-.75,-1,15>;
			call blaster_base s<.75,-1,15>;
			call blaster_base s<-.75,1,15>;
			call blaster_base s<1.5,0,15>;
			call blaster_base s<-1.5,0,15>;
			call blaster_base s<3,0,15>;
			call blaster_base s<-3,0,15>;
			
			sfx create explosion #SOURCE 
				"vmin(1)vmax(16)omni_dir()ts(.15)
				scale_range(.33,.66,0)texture(b_sfx_sparkle01)color0(1,.66,.33)
				color1(0,0,0)dur(.55)radius(.2)fade_range(16,16,0)count(55)
				scale(.45)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;

			pause 4;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*]
{
	name	=fire_blast;

	script	=[[	
			
			sound play s_e_spell_fireball_cast at #SOURCE_POSITION dist 3 20;
			
			///////////////////////////////////////////////////////////////////////////////
			// we call the base fireball with some random offsets to make it shoot in a fan.
			
			frandrange -2 2; frandrange -2 2;
			frandrange -2 2; frandrange -2 2;
			frandrange -2 2; frandrange -2 2;
			frandrange -2 2; frandrange -2 2;

			call fireball_base v<#POP 0 #POP> u<2>;
			set $shot1 #POP;

			call fireball_base v<#POP 0 #POP> u<2>;
			set $shot2 #POP;

			call fireball_base v<#POP 0 #POP> u<2>;
			set $shot3 #POP;

			call fireball_base v<#POP 0 #POP> u<2>;
			set $shot4 #POP;

			call fireball_base v<0 0 0> u<2>;
			set $shot5 #POP;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*] // -ET
{
	name	=ring_fire;

	script =[[
			sound play s_e_spell_fire_ring_cast at #TARGET_POSITION dist 3 25;

			//sound play s_e_burning_large loop;
			//set $burning #POP;
			
			sfx create fire #SOURCE
			"must_update()flamesize(1)count(100)color0(1,.5,.2)color1(0,0,0)
			velocity(0,-10,0)accel(0,16,0)alphafade(.65)min_displace(0)
			max_displace(0)radius([3])min_radius(.5)max_radius(3)
			[0][1]";
			
			set $fire #POP;
			sfx start $fire;

			//pause [2];
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=fire_wall;

	script =[[
			set $radius1 [3];
			set $radius2 f<-$radius1>;
			set $distance [4];
			
			
			sound play s_e_spell_fire_wall_cast at #TARGET_POSITION dist 3 40;

			sound play s_e_burning_large at #TARGET_POSITION dist 3 30 loop;
			set $burning #POP;

			sfx create fire #SOURCE
				"must_update()line()flamesize(1)count(40)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,-20,0)
				accel(0,50,0)alphafade(.65)min_displace(-5)max_displace(5)
				radius(1)[0][1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<$radius1 0 $distance> source;
			sfx offset_bone #PEEK v<$radius2 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire #POP;
			sfx start $fire;

			sfx create fire #SOURCE
				"must_update()line()flamesize(5)count(20)offset(0,.33,0)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,10,0)
				accel(0,12,0)alphafade(.65)min_displace(0)max_displace(1)
				radius(1)[1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<3.5 0 $distance> source;
			sfx offset_bone #PEEK v<2.3 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire2 #POP;
			sfx start $fire2;
			
			sfx create fire #SOURCE
				"must_update()line()flamesize(5)count(20)offset(0,.33,0)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,10,0)
				accel(0,12,0)alphafade(.65)min_displace(0)max_displace(1)
				radius(1)[1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<2.3 0 $distance> source;
			sfx offset_bone #PEEK v<1.15 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire3 #POP;
			sfx start $fire3;
			
			sfx create fire #SOURCE
				"must_update()line()flamesize(5)count(20)offset(0,.33,0)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,10,0)
				accel(0,12,0)alphafade(.65)min_displace(0)max_displace(1)
				radius(1)[1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<1.15 0 $distance> source;
			sfx offset_bone #PEEK v<0 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire4 #POP;
			sfx start $fire4;
			
			sfx create fire #SOURCE
				"must_update()line()flamesize(5)count(20)offset(0,.33,0)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,10,0)
				accel(0,12,0)alphafade(.65)min_displace(0)max_displace(1)
				radius(1)[1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<0 0 $distance> source;
			sfx offset_bone #PEEK v<-1.15 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire5 #POP;
			sfx start $fire5;
			
			sfx create fire #SOURCE
				"must_update()line()flamesize(5)count(20)offset(0,.33,0)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,10,0)
				accel(0,12,0)alphafade(.65)min_displace(0)max_displace(1)
				radius(1)[1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<-1.15 0 $distance> source;
			sfx offset_bone #PEEK v<-2.3 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire6 #POP;
			sfx start $fire6;
			
			sfx create fire #SOURCE
				"must_update()line()flamesize(5)count(20)offset(0,.33,0)
				color0(.75,.3,.15)color1(.2,.1,.05)velocity(0,10,0)
				accel(0,12,0)alphafade(.65)min_displace(0)max_displace(1)
				radius(1)[1]";
			sfx target #PEEK source;
			sfx offset_bone #PEEK v<-2.3 0 $distance> source;
			sfx offset_bone #PEEK v<-3.5 0 $distance> target;
			sfx snap_to_ground #PEEK;
			set $fire7 #POP;
			sfx start $fire7;
			
			
			pause [2];

			sound stop $burning;
			sfx finish $fire;
			sfx finish $fire2;
			sfx finish $fire3;
			sfx finish $fire4;
			sfx finish $fire5;
			sfx finish $fire6;
			sfx finish $fire7;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=weaken;

	script	=[[
			sound play s_e_spell_weaken_cast at #TARGET_POSITION dist 3 20;

			set $texture b_sfx_sparkle_02;
			set $detail 7;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(30)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1)scale(.75)color0(1,0,0)
			segments($detail)";
			
				
			sfx start #POP;

			pause .1;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(-27)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1.1)scale(.75)color0(.9,0,.05)
			segments($detail)";
			
				
			sfx start #POP;

			pause .15;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(24)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1.2)scale(.75)color0(.85,0,.1)
			segments($detail)";
			
				
			sfx start #POP;

			pause .2;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(-21)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1.2)scale(.75)color0(.8,0,.15)
			segments($detail)";
			
				
			sfx start #POP;

			pause .25;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(18)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1.2)scale(.75)color0(.7,.05,.2)
			segments($detail)";
			
				
			sfx start #POP;

			pause .3;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(-15)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1.2)scale(.75)color0(.65,.05,.25)
			segments($detail)";
			
				
			sfx start #POP;

			pause .35;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(12)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1.1)scale(.75)color0(.6,.05,.3)
			segments($detail)";
			
				
			sfx start #POP;

			pause .4;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(-9)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(1)scale(.75)color0(.5,.1,.35)
			segments($detail)";
			
				
			sfx start #POP;

			pause .45;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(6)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(2)scale(.75)color0(.45,.1,.35)
			segments(10)";
			
				
			sfx start #POP;

			pause .5;

			sfx create cylinder #TARGET
			"texture($texture)hp0(1.5,-1,-2.5)hp1(2,-.5,-2.5)spin(-3)
			rp0(0,1.5,1.5)rp1(0,.66,.66)dur(3)scale(.75)color0(.4,.1,.4)
			segments(15)";
			
				
			sfx start #POP;

			pause .3;

			set $center .3;

			set $height .2;

			set $offset 0,.5,0;

			sfx create orbiter #TARGET 
				"tin(1)scale(.3)offset($offset)texture($texture)color0(1,.1,1)
				radius(.6)iphi(4)itheta(.25)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb #POP;
			sfx start $orb;

			sfx create sparkles #TARGET 
				"radius(.1)texture($texture)color0(1,.1,1)scale(.3)yvel(-0.1)
				count(4)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create linetracer #TARGET 
				"lock()tout(1)color0(.6,.1,.2)color1(.6,.1,.2)tin(.3)
				fade_rate(1)";
			set $trace #POP;
            sfx rat $trace;
            sfx target $trace $orb;
			sfx target $trace $orb;
            sfx offset_bone $trace v<0  .03 0> target;
			sfx offset_bone $trace v<0 -.03 0> source;
            sfx target $trace target;
			sfx start $trace;

			sfx create linetracer #TARGET 
				"lock()tout(1)color0(.3,.1,.6)color1(.3,.1,.6)tin(.3)
				fade_rate(1)";
			set $trace2 #POP;
            sfx rat $trace2;
            sfx target $trace2 $orb;
			sfx target $trace2 $orb;
            sfx offset_bone $trace2 v<.03 0 0> target;
			sfx offset_bone $trace2 v<-.03 0 0> source;
            sfx target $trace2 target;
			sfx start $trace2;
			]];
}
[effect_script*] // -ET
{
	name	=curse;

	script	=[[
			sound play s_e_spell_curse_cast at #TARGET_POSITION dist 3 20;

			set $texture b_sfx_lightray01;
			set $detail 16;

			sfx create cylinder #TARGET
				"tin(1)tout(1)texture($texture)hp0(-3,-1.25,0.5)hp1(0,0,0)
				spin(1)rp0(1,1,0)rp1(1,1,0)dur(4.66)scale(.75)color0(.3,0,0)
				segments($detail)";
			sfx start #POP;

			sfx create cylinder #TARGET
				"tin(1)tout(1)texture($texture)hp0(3,1.25,-0.5)hp1(0,0,0)
				spin(1)rp0(1,1,0)rp1(1,1,0)dur(4.66)scale(.75)color0(.3,0,0)
				segments($detail)";
			sfx start #POP;

			sfx create cylinder #TARGET
				"tin(1)tout(1)texture($texture)hp0(-2.5,-.75,0.5)hp1(0,0,0)
				spin(-2)rp0(1.25,1.25,0)rp1(1.25,1.25,0)dur(4)scale(.75)
				color0(.3,0,0.08)segments($detail)";
			sfx start #POP;

			sfx create cylinder #TARGET
				"tin(1)tout(1)texture($texture)hp0(2.5,.75,-0.5)hp1(0,0,0)
				spin(-2)rp0(1.25,1.25,0)rp1(1.25,1.25,0)dur(3.66)scale(.75)
				color0(.3,0,.08)segments($detail)";
			sfx start #POP;

			sfx create cylinder #TARGET
				"tin(1)tout(1)texture($texture)hp0(-2,-.25,0.5)hp1(0,0,0)
				spin(3)rp0(1.5,1.5,0)rp1(1.5,1.5,0)dur(3.33)scale(.75)
				color0(.3,0,.16)segments($detail)";	
			sfx start #POP;

			sfx create cylinder #TARGET
				"tin(1)tout(1)texture($texture)hp0(2,.25,-0.5)hp1(0,0,0)
				spin(3)rp0(1.5,1.5,0)rp1(1.5,1.5,0)dur(3)scale(.75)
				color0(.3,0,.16)segments($detail)";
			sfx start #POP;

			set $center .3;

			set $height .2;

			pause .5;

			set $offset 0,1.5,0;

			sfx create orbiter #TARGET 
				"tin(1)scale(0.3)offset($offset)
				color0(1,.4,.6)radius(0)";
			sfx attach_point #PEEK @body_anterior target;
			set $orb #POP;
			sfx start $orb;

			sfx create cylinder #TARGET
				"scale(.1)tin(1)tout(1)texture($texture)hp0(-3,-1.25,0.5)
				hp1(0,0,0)spin(4)rp0(1,1,0)rp1(1,1,0)color0(.6,0,0)
				segments(6)";	
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create cylinder #TARGET
				"scale(.1)tin(1)tout(1)texture($texture)hp0(3,1.25,-0.5)
				hp1(0,0,0)spin(4)rp0(1,1,0)rp1(1,1,0)color0(.6,0,0)
				segments(6)";		
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
			]];
}

[effect_script*] // -ET
{
	name	=pestilence;

	script	=[[
			sound play s_e_spell_pestilence_cast at #TARGET_POSITION dist 5 30; //loop
			//set $rot #POP

			sfx create orbiter #TARGET 
				"must_update()iphi(0)radius(0)invisible()[1]";
			set $base #POP;
			sfx snap_to_ground $base;
			sfx start $base;

			sfx create orbiter #TARGET 
				"must_update()offset(0,.3,0)iphi(0)radius(0)invisible()
				[1]";
			set $orb #POP;
			sfx rat $orb;
			sfx target $orb $base;
			sfx start $orb;

			sfx create orbiter #TARGET 
				"must_update()iphi(2)radius(3)invisible()[1]";
			set $orb2 #POP;
			sfx rat $orb2;
			sfx target $orb2 $orb;
			sfx start $orb2;

			sfx create orbiter #TARGET 
				"must_update()iphi(-3)radius(3)invisible()[1]";
			set $orb3 #POP;
			sfx rat $orb3;
			sfx target $orb3 $orb;
			sfx start $orb3;

			sfx create orbiter #TARGET 
				"must_update()iphi(1)radius(2)invisible()[1]";
			set $orb4 #POP;
			sfx rat $orb4;
			sfx target $orb4 $orb;
			sfx start $orb4;

			sfx create fire #TARGET 
				"must_update()dark()grey_tex()color0(.5,1,.2)[1]
				count(90)velocity(0,.5,0)accel(0,0,0)alphafade(.1)flamesize(8)
				max_radius(30)min_displace(.4)max_displace(.5)";
			set $pcloud #POP;
			sfx rat $pcloud;
			sfx target $pcloud $orb;
			sfx start $pcloud;

			sfx create fire #TARGET 
				"must_update()dark()grey_tex()color0(.7,1,.2)[1]
				count(40)velocity(0,8,0)accel(0,0,0)alphafade(.3)flamesize(6)
				max_radius(3)min_displace(.1)max_displace(.2)";
			set $pcloud2 #POP;
			sfx rat $pcloud2;
			sfx target $pcloud2 $orb2;
			sfx start $pcloud2;

			sfx create fire #TARGET 
				"must_update()line()color0(.5,1,.2)[1]count(40)velocity(0,15,0)
				accel(0,15,0)alphafade(.8)flamesize(4)max_radius(6)min_displace(.1)
				max_displace(1.8)[0]";
			set $pcloud3 #POP;
			sfx rat $pcloud3;
			sfx target $pcloud3 $orb3;
			sfx target $pcloud3 $orb2;
			sfx start $pcloud3;

			sfx create fire #TARGET 
				"must_update()color0(.6,.6,.2)[1]count(7)velocity(0,2,0)
				accel(0,0,0)alphafade(.4)flamesize(.3)max_radius(30)
				min_displace(.4)max_displace(.5)";
			set $speckle1 #POP;
			sfx rat $speckle1;
			sfx target $speckle1 $orb;
			sfx start $speckle1;

			sfx create fire #TARGET 
				"must_update()color0(.5,1,.2)[1]count(7)velocity(0,2,0)
				accel(0,0,0)alphafade(.4)flamesize(.1)min_radius(25)
				max_radius(30)min_displace(.4)max_displace(.5)";
			set $speckle2 #POP;
			sfx rat $speckle2;
			sfx target $speckle2 $orb;
			sfx start $speckle2;

			sfx create fireb  #TARGET 
				"must_update()[1]color0(.2,1,.2)velocity(0,10,0)
				accel(0,0,0)alphafade(.2)lower_r0(0)lower_r1(0)upper_r0(-2)
				upper_r1(-4)count(20)flamesize(2)";
			set $spurt #POP;
			sfx rat $spurt;
			sfx target $spurt $orb4;
			sfx start $spurt;

			]];
}

[effect_script*] // -ET
{
	name	=pestilence_roam;

	script	=[[
			set $radius 3;

			sound play s_e_spell_pestilence_cast at #TARGET_POSITION dist 5 30; //loop
			//set $rot #POP

			sfx create orbiter #TARGET 
				"must_update()invisible()iphi(0)radius($radius)iphi(.3)
				free()smooth()[1]";
			set $base #POP;
			sfx snap_to_ground $base;
			sfx start $base;

			sfx create orbiter #TARGET 
				"must_update()invisible()color0(1,0,0)iphi(0)radius($radius)
				iphi(-.9)free()smooth()[1]";
			set $base2 #POP;
			sfx rat $base2;
			sfx target $base2 $base;
			sfx start $base2;

			sfx create orbiter #TARGET 
				"must_update()radius(0)iphi(0)invisible()[1]";
			set $nbase #POP;
			sfx rat $nbase;
			sfx target $nbase $base2;
			sfx start $nbase;

			sfx create orbiter #TARGET 
				"must_update()offset(0,.3,0)iphi(0)radius(0)invisible()
				[1]";
			set $orb #POP;
			sfx rat $orb;
			sfx target $orb $nbase;
			sfx start $orb;

			sfx create orbiter #TARGET 
				"must_update()scale(1.2)iphi(2)radius(3)invisible()[1]";
			set $orb2 #POP;
			sfx rat $orb2;
			sfx target $orb2 $orb;
			sfx start $orb2;

			sfx create orbiter #TARGET 
				"must_update()scale(1.2)iphi(-3)radius(3)invisible()
				[1]";
			set $orb3 #POP;
			sfx rat $orb3;
			sfx target $orb3 $orb;
			sfx start $orb3;

			sfx create orbiter #TARGET 
				"must_update()scale(1.2)iphi(1)radius(2)invisible()[1]";
			set $orb4 #POP;
			sfx rat $orb4;
			sfx target $orb4 $orb;
			sfx start $orb4;

			sfx create fire #TARGET 
				"must_update()scale(1.2)dark()grey_tex()color0(.5,1,.2)
				[1]count(90)velocity(0,.5,0)accel(0,0,0)alphafade(.1)
				flamesize(8)max_radius(30)min_displace(.4)max_displace(.5)";
			set $pcloud #POP;
			sfx rat $pcloud;
			sfx target $pcloud $orb;
			sfx start $pcloud;

			sfx create fire #TARGET 
				"must_update()scale(1.2)dark()grey_tex()color0(.7,1,.2)
				[1]count(40)velocity(0,8,0)accel(0,0,0)alphafade(.3)
				flamesize(6)max_radius(3)min_displace(.1)max_displace(.2)";
			set $pcloud2 #POP;
			sfx rat $pcloud2;
			sfx target $pcloud2 $orb2;
			sfx start $pcloud2;

			sfx create fire #TARGET 
				"must_update()scale(1.2)line()color0(.5,1,.2)[1]
				count(40)velocity(0,8,0)accel(0,8,0)alphafade(.8)flamesize(4)
				max_radius(6)min_displace(-.1)max_displace(1)[0]";
			set $pcloud3 #POP;
			sfx rat $pcloud3;
			sfx target $pcloud3 $orb3;
			sfx target $pcloud3 $orb2;
			sfx start $pcloud3;

			sfx create fire #TARGET 
				"must_update()scale(1.2)color0(.6,.6,.2)[1]count(7)
				velocity(0,2,0)accel(0,0,0)alphafade(.4)flamesize(.3)
				max_radius(30)min_displace(.4)max_displace(.5)";
			set $speckle1 #POP;
			sfx rat $speckle1;
			sfx target $speckle1 $orb;
			sfx start $speckle1;

			sfx create fire #TARGET 
				"must_update()scale(1.2)color0(.5,1,.2)[1]count(7)
				velocity(0,2,0)accel(0,0,0)alphafade(.4)flamesize(.1)
				min_radius(25)max_radius(30)min_displace(.4)max_displace(.5)";
			set $speckle2 #POP;
			sfx rat $speckle2;
			sfx target $speckle2 $orb;
			sfx start $speckle2;

			sfx create fireb #TARGET 
				"must_update()scale(1.2)[1]color0(.2,1,.2)velocity(0,10,0)
				accel(0,0,0)alphafade(.2)lower_r0(0)lower_r1(0)upper_r0(-2)
				upper_r1(-4)count(20)flamesize(2)";
			set $spurt #POP;
			sfx rat $spurt;
			sfx target $spurt $orb4;
			sfx start $spurt;
			]];
}



[effect_script*] // -ET
{
	name	=burn_body;

	script	=[[
			sound play s_e_spell_burnbody_cast at #TARGET_POSITION dist 3 30;

			set $dur 2;

			sfx create spe #TARGET_KB 
				"must_update()offset(0,.5,0)tin(1)tout(1)ts(1)color0(.8,.5,.2)
				texture(b_sfx_splotches_02)radius(.6)scale(.2)count(100)
				dur($dur)index0(0,-1.57,1.57)index1(0,-1.57,1.57)speed0(11,0,11)
				speed1(10,0,10)space0(.1256,.02612,.1256)space1(.1256,.02612,.1256)
				";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create fire #TARGET_KB 
				"scale(.85)must_update()dur($dur)color0(.5,.35,.2)color1(0,0,0)
				count(32)alphafade(.5)flamesize(3.5)max_radius(6)velocity(0,8,0)
				accel(0,8,0)texture(b_sfx_fireball-01)min_displace(-.5)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			pause 1;
			
			sfx create fire #TARGET_KB 
				"delay(0.03)max_displace(.1)sinspeed(.0002)dur(.65)
				sinpos(0)count(130)velocity(0,3,0)accel(0,3,0)color1(0,.2,0)
				alphafade(.33)flamesize(1)color0(1,.4,0)ts(3)scale(1)radius_rmax(15)max_radius(6)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			pause .2;
			
			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=shock;

	script	=[[
			sound play s_e_spell_shock_cast at #TARGET_POSITION dist 3 20;

			set $radius1 -.3,-.1,.5;
			set $radius2 0,3,3;
			set $scale .85;

			sfx create orbiter #TARGET 
				"must_update()offset(0,.5,0)iphi(0)radius(0)invisible()
				dur(30)";
			set $orb #POP;
			sfx snap_to_ground $orb;
			sfx start $orb;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(0,0,0)
			hp1(1,1,0)spin(19)rp0($radius1)rp1($radius2)dur(1)scale($scale)
			color0(1,1,1)offset(0,-.5,0)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(.25,.25,0)
			hp1(.75,.75,0)spin(14)rp0($radius1)rp1($radius2)dur(1)
			scale($scale)color0(1,1,1)offset(0,-.5,0)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			pause .1;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(1,1,0)
			hp1(0,0,0)spin(-17)rp0($radius1)rp1($radius2)dur(1)
			scale($scale)color0(1,1,1)offset(0,-.5,0)";
			
					
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(.75,.75,0)
			hp1(.25,.25,0)spin(-12)rp0($radius1)rp1($radius2)dur(1)
			scale($scale)color0(1,1,1)offset(0,-.5,0)";
			
					
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			pause .2;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(0,0,0)
			hp1(1,1,0)spin(11)rp0($radius1)rp1($radius2)dur(1)scale($scale)
			color0(1,1,1)offset(0,-.5,0)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(.25,.25,0)
			hp1(.75,.75,0)spin(16)rp0($radius1)rp1($radius2)dur(1)
			scale($scale)color0(1,1,1)offset(0,-.5,0)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			pause .1;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(1,1,0)
			hp1(0,0,0)spin(-17)rp0($radius1)rp1($radius2)dur(1)
			scale($scale)color0(1,1,1)offset(0,-.5,0)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create cylinder #TARGET
			"must_update()alpha(.3)texture(b_sfx_armor_shock)hp0(.75,.75,0)
			hp1(.25,.25,0)spin(-10)rp0($radius1)rp1($radius2)dur(1)
			scale($scale)color0(1,1,1)offset(0,-.5,0)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=shock_wave_old;

	script	=[[
			sound play s_e_spell_shock_cast at #TARGET_POSITION dist 3 20;

			set $radius1 0,3,3;
			set $radius2 .5,3.5,3.5;

			sfx create orbiter #TARGET 
				"must_update()offset(0,.5,0)iphi(0)radius(0)invisible()
				dur(4)";
			set $orb #POP;
			sfx snap_to_ground $orb;
			sfx start $orb;

			sfx create cylinder #TARGET
			"must_update()texture(b_sfx_moon_01_tsd-02)scale(.8)
			alpha(.3)hp0(.5,.5,0)hp1(0,0,0)spin(16)rp0($radius1)
			rp1($radius2)dur(1)color0(.4,.4,1)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create explosion #TARGET
				"must_update()scale_range(.6,.6,0)rand_scale()rvel(0,2,0)
				color0(.5,.5,1)texture(b_sfx_sparkle01)ts(.3)vmin(80)
				vmax(120)omni_dir()count(100)min_phi(3.14)max_phi(3.14)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			pause .5;

			sound play s_e_spell_shock_cast at #TARGET_POSITION dist 3 20;

			sfx create cylinder #TARGET
			"must_update()texture(b_sfx_moon_01_tsd-02)scale(.8)
			alpha(.3)hp0(.5,.5,0)hp1(0,0,0)spin(16)rp0($radius1)
			rp1($radius2)dur(1)color0(.4,.4,1)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create explosion #TARGET
				"must_update()scale_range(.6,.6,0)rand_scale()rvel(0,2,0)
				color0(.5,.5,1)texture(b_sfx_sparkle01)ts(.3)vmin(80)
				vmax(120)omni_dir()count(100)min_phi(3.14)max_phi(3.14)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			pause .5;

			sound play s_e_spell_shock_cast at #TARGET_POSITION dist 3 20;

			sfx create cylinder #TARGET
			"must_update()texture(b_sfx_moon_01_tsd-02)scale(.8)
			alpha(.3)hp0(.5,.5,0)hp1(0,0,0)spin(16)rp0($radius1)
			rp1($radius2)dur(1)color0(.4,.4,1)";
			
				
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create explosion #TARGET
				"must_update()scale_range(.6,.6,0)rand_scale()rvel(0,2,0)
				color0(.5,.5,1)texture(b_sfx_sparkle01)ts(.3)vmin(80)
				vmax(120)omni_dir()count(100)min_phi(3.14)max_phi(3.14)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*] // -ET
{
	name	=shock_wave;

	script	=[[
			sound play s_e_spell_shock_wave_cast at #TARGET_POSITION dist 5 35;

			set $radius1 0,3,6;
			set $radius2 0,4,8;

			sfx create flurry #TARGET
			"must_update()count(50)tin(0)tout(0)dur(0.2)color0(1,1,.7)
			grow_params(.5,.5,0)";
			
			sfx freeze_targets #PEEK;
			sfx start #POP;

//			pause .2;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			sfx create flurry #TARGET
			"must_update()count(50)tin(0)tout(.5)dur(0.5)color0(1,1,.7)
			grow_params(0,4,5)delay(.2)";
			
			
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()texture(b_sfx_sparkle01)omni_dir()vmin(10)
				vmax(12)ts(.5)count(100)dur(3)scale(.75)color0(1,1,.7)
				color1(0,0,0)rvel(0,2,0)ivel(0,0,0)delay(.2)";

			sfx freeze_targets #PEEK;
			sfx start #POP;

			camerashake camera_stomp s<frequency=20&magnitude_x=0&magnitude_y=.1&magnitude_z=0&duration=1&epicenter=#TARGET_GOID>;

			sfx create cylinder #TARGET
			"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(1)
			hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
			dur(.5)color0(1,1,.7)segments(24)delay(.2)";
			
			sfx freeze_targets #PEEK;
			sfx start #POP;

//			pause .1;

			sfx create cylinder #TARGET
			"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(1)
			hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
			dur(.5)color0(1,1,.7)segments(24)delay(.3)";
			
			sfx freeze_targets #PEEK;
			sfx start #POP;

//			pause .1;

			sfx create cylinder #TARGET
			"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(1)
			hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
			dur(.5)color0(1,1,.7)segments(24)delay(.4)";
			
			sfx freeze_targets #PEEK;
			sfx start #POP;
			]];
}

[effect_script*] // -ET
{
	name	=implosion;

	script	=[[
			sound play s_e_spell_implosion_cast at #TARGET_POSITION dist 5 35;

			camerashake camera_stomp s<frequency=20&magnitude_x=0&magnitude_y=.05&magnitude_z=0&duration=3&epicenter=#TARGET_GOID>;

			sfx create sray #TARGET 
				"must_update()dur(3)scale(.5)radius(1)lmin(3.4)lmax(3.8)
				color0(.1,.1,.5)color1(0,0,0)wsmin(.3)wsmax(.3)wemin(.3)
				wemax(.3)";
			set $ray #POP;
			sfx start $ray;

			sfx create flurry #TARGET
			"must_update()count(50)tin(.2)tout(.2)dur(3.1)color0(.2,.2,1)
			grow_params(2,2,2)";
			
			
			sfx start #POP;

			pause 3;

			sfx create flurry #TARGET
			"must_update()count(50)tin(0)tout(0)dur(0.2)color0(.2,.2,1)
			grow_params(2,2,0)";
			
			
			sfx start #POP;


            pause .2;


            camerashake camera_stomp s<frequency=10&magnitude_x=0&magnitude_y=.3&magnitude_z=0&duration=.2&epicenter=#TARGET_GOID>;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;

            sfx destroy $ray;

            sfx create explosion #TARGET 
	            "must_update()texture(b_sfx_sparkle01)omni_dir()vmin(10)
	            vmax(12)ts(.5)count(100)dur(3)scale(.75)color0(.2,.2,1)
	            color1(0,0,0)rvel(0,2,0)ivel(0,0,0)";
			sfx start #POP;

			sfx create flurry #TARGET
			"must_update()count(50)tin(0)tout(.5)dur(0.5)color0(.2,.2,1)
			grow_params(0,4,5)";
			
			
			sfx start #POP;

			]];
}

[effect_script*]
{
	name	=ice_storm;

	script	=[[
			///////////////////////////////////////////////////
			// create the trackball to base the whole effect on
			sfx create trackball #TARGET_KB 
				"must_update()ts(1.35)accel(0)color0(1,.3,0)dur(#DEFAULT_TIMEOUT)scale(.2)
				afterlife(.5)rvel_max(0)invisible()";
			set $trackball #POP;
			sfx position_at $trackball @kill_bone source;
			sfx freeze_targets $trackball;
			sfx friendly party $trackball;
			sfx start $trackball;
			
			sfx create orbiter #TARGET 
				"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)
				itheta(0)model(ice_shard_02)model_smax(1)model_sin(.2)
				model_sout(.1)rotate(90,0,0)";
			set $shard #POP;
			sfx rat $shard;
			sfx target $shard $trackball;
			sfx attach $trackball $shard;
			
			waitfor collision $trackball #DEFAULT_TIMEOUT;
			set $collision_type #POP;

			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get target_position $trackball target;
				sound play s_e_spell_iceshard_hit at #POP dist 3 30;	
				
				set $scale .2;
				
				get collision point $trackball target;
				sfx create explosion #POP
					"omni_dir()dur(3)vmin(1)vmax(1)scale_range(0,.4,0)texture(b_sfx_sparkle01)
					color0(0.3,0.4,0.7)color1(0,.1,.3)dur(2)radius(.4)fade_range(0,1,0)
					count(25)";
				set $exp #POP;
				sfx start $exp;
				
				get collision point $trackball target;
				sfx create sray #POP 
					"ts(10)dur(.2)scale(.5)radius(.5)lmin(1)lmax(1.5)color0(0,0,.4)
					color1(.5,.5,1)theta(0,0,0)phi(0,0,0)wsmin(0)wsmax(0)
					wemin(.1)wemax(.1)";
				set $ray #POP;
				sfx start $ray;
				
				pause .5;
				
				sfx destroy $ray;
				sfx destroy $exp;
			}
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*] // -ET
{
	name	=lightning_storm;

	script	=[[
			///////////////////////////////////////////////////
			// create the trackball to base the whole effect on
			sfx create trackball #TARGET_KB 
				"must_update()ts(20.35)accel(0)color0(1,.3,0)dur(#DEFAULT_TIMEOUT)scale(.2)
				afterlife(.1)rvel_max(0)";
			set $trackball #POP;
			sfx position_at $trackball @kill_bone source;
			sfx freeze_targets $trackball;
			sfx friendly party $trackball;
			sfx start $trackball;
			
			sfx create lightning #SOURCE 
				"must_update()bolt_life(.3)scale(1.5)color0(.7,.7,1)
				dur(3)mindisplace(-.22)maxdisplace(.22)subd(.3)minsubd(.1)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx target #PEEK source;
			sfx target #PEEK $trackball;
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()count(10)color0(.7,.7,1.)color1(.1,.1,.1)
				delay(.2)dur(2.5)scale(.66)max_radius(4)velocity(0,20,0)
				accel(0,20,0)";
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			sfx start #POP;
			
			waitfor collision $trackball #DEFAULT_TIMEOUT;
			set $collision_type #POP;
			
			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get target_position $trackball target;
				sound play s_e_spell_lightning_storm_hit at #POP dist 10 55;	
				
				get collision point $trackball target;
				sfx create explosion #POP 
					"must_update()vmin(4)vmax(6)ivel(0,3.5,0)omni_dir()
					scale_range(0,.5,0)texture(b_sfx_sparkle01)color0(.7,.7,1)
					dur(4)radius(.1)fade_range(0,1,0)count(50)";
				sfx start #POP;
				
				get collision point $trackball target;
				sfx create fire #POP 
					"must_update()count(10)color0(.7,.7,1.)color1(.1,.1,.1)
					delay(.2)dur(.5)scale(.66)max_radius(4)velocity(0,20,0)
					accel(0,20,0)";
				sfx start #POP;
			}
			]];
}
[effect_script*] // -ET
{
	name	=lightning_storm_cast;

	script	=[[
			sound play s_e_spell_lightning_storm_cast at #TARGET_POSITION dist 5 45;
			]];
}

[effect_script*] // -ET
{
	name	=storm_cast;

	script	=[[
			sfx create explosion #TARGET 
				"must_update()srate(.02)vmin(4)vmax(8)ivel(0,1.5,0)rvel(5,1.5,5)
				scale_range(0,.5,0)texture(b_sfx_sparkle01)color0(.7,.7,1)
				radius(.8)fade_range(3,3,0)count(25)dur(40)";
			sfx start #POP;
			]];
}
[effect_script*] // -ET
{
	name	=storm;

	script	=[[
			sound play s_e_spell_lightning_cast at #TARGET_POSITION dist 1 45;

			sfx create lightning #TARGET 
				"must_update()bolt_life(.3)scale(1.5)color0(.7,.7,1)
				mindisplace(-.2)maxdisplace(.2)subd(.3)minsubd(.1)[0][1]";
			set $bolt #POP;
			sfx target $bolt target;
			sfx offset_bone $bolt v<0 15 0> target;
			sfx start $bolt;

			sfx create lightning #TARGET 
				"must_update()bolt_life(.3)scale(1.5)color0(.7,.7,1)
				mindisplace(-.1)maxdisplace(.1)subd(.3)minsubd(.1)[1]";
			set $bolt2 #POP;
			sfx target $bolt2 target;
			sfx offset_bone $bolt2 v<0 15 0> target;
			sfx start $bolt2;

			sfx create fire #TARGET 
				"must_update()count(10)color0(.7,.7,1.)color1(.1,.1,.1)
				delay(.2)scale(.66)max_radius(4)velocity(0,20,0)accel(0,20,0)
				[1]";
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()srate(.02)vmin(4)vmax(8)ivel(0,1.5,0)rvel(5,1.5,5)
				scale_range(0,.5,0)texture(b_sfx_sparkle01)color0(.7,.7,1)
				radius(.4)fade_range(0,1,0)count(25)[1]";
			sfx start #POP;
			]];
}

[effect_script*] // -ET
{
	name	=freeze;

	script	=[[
			sound play s_e_spell_iceblast_cast at #SOURCE_POSITION dist 10 35;
			
			set $duration #DEFAULT_TIMEOUT;
			set $radius .5;

			sfx create trackball #TARGET_KB 
				"must_update()texture(b_sfx_sparkle01)spin(.5)radius(.2)
				scale(2)color0(.5,.5,1)homing()damped()kdamp(.01)dur($duration)
				afterlife(2)";
			set $trackball #POP;
			sfx position_at $trackball @weapon_bone source;
			sfx friendly party $trackball;
			sfx start $trackball;

			sfx create orbiter #TARGET 
				"must_update()texture(b_sfx_sparkle01)color0(.6,.9,1)
				free()scale(1.5)dur($duration)radius($radius)iphi(8)
				itheta(2)phi(0)";
			set $orb #POP;
			sfx rat $orb;
			sfx target $orb $trackball;
			sfx start $orb;

			sfx create orbiter #TARGET 
				"must_update()texture(b_sfx_sparkle01)color0(.9,.6,1)
				free()scale(1.5)dur($duration)radius($radius)iphi(8)
				itheta(2)phi(2.08)";
			set $orb2 #POP;
			sfx rat $orb2;
			sfx target $orb2 $trackball;
			sfx start $orb2;

			sfx create orbiter #TARGET 
				"must_update()texture(b_sfx_sparkle01)color0(.75,.75,1)
				free()scale(1.5)dur($duration)radius($radius)iphi(8)
				itheta(2)phi(4.17)";
			set $orb3 #POP;
			sfx rat $orb3;
			sfx target $orb3 $trackball;
			sfx start $orb3;

			sfx create fire #TARGET 
				"must_update()color0(.5,.5,1)alphafade(.5)max_radius(1)
				dur($duration)scale(2)count(40)max_displace(0)velocity(0,0,0)
				accel(0,0,0)";
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx start $fire;

			sfx create fire #TARGET 
				"must_update()color0(.6,.9,1)alphafade(.5)max_radius(1)
				dur($duration)scale(.3)count(30)max_displace(0)velocity(0,0,0)
				accel(0,0,0)";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $orb;
			sfx start $fire2;

			sfx create fire #TARGET 
				"must_update()color0(.9,.6,1)alphafade(.5)max_radius(1)
				dur($duration)scale(.3)count(30)max_displace(0)velocity(0,0,0)
				accel(0,0,0)";
			set $fire3 #POP;
			sfx rat $fire3;
			sfx target $fire3 $orb2;
			sfx start $fire3;

			sfx create fire #TARGET 
				"must_update()color0(.75,.75,1)alphafade(.5)max_radius(1)
				dur($duration)scale(.3)count(30)max_displace(0)velocity(0,0,0)
				accel(0,0,0)";
			set $fire4 #POP;
			sfx rat $fire4;
			sfx target $fire4 $orb3;
			sfx start $fire4;

			waitfor collision $trackball #DEFAULT_TIMEOUT;

			set $collision_type #POP;

			get target_position $trackball target;
			sound play s_e_hit_steeledge_ice at #POP dist 10 35;
													
			if ( ( $collision_type == #OBJECT_COLLISION ) || ( $collision_type == #TERRAIN_COLLISION ) )
			{
				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()ivel(0,1,0)texture(b_sfx_sparkle01)color0(.5,.5,1)
					radius(.5)dur(2)omni_dir()scale_range(.5,1,0)count(50)scale(.65)";
				sfx start #POP;

				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()ivel(0,1,0)color0(.2,.2,1)radius(.5)dur(2)scale(.65)
					omni_dir()scale_range(.5,1,0)count(50)";
				sfx start #POP;

				get collision point $trackball;
				sfx create explosion #POP 
					"must_update()ivel(0,1,0)texture(b_sfx_sparkle01)color0(.5,.5,1)scale(.3)ts(.1)
					radius(.5)dur(4)omni_dir()scale_range(.5,1,0)count(50)fade_range(1,1,0)
					vmin(0)vmax(5)";
				sfx start #POP;

				get collision point $trackball;
				sfx create fire #POP
					"ts(.25)count(40)scale(.76)color0(.2,.3,.5)velocity(0,-6,0)
					accel(0,0,1)alphafade(.4)instant()max_radius(12)min_displace(-1.5)
					dur(3)";
				sfx start #POP;
				
				get collision point $trackball;
				sfx create fire #POP
					"ts(.2)count(40)scale(.76)color0(.2,.3,.5)velocity(0,-6,0)dur(3)
					accel(0,0,1)alphafade(.4)instant()max_radius(12)min_displace(-1.5)";
				sfx start #POP;
			}

			sfx destroy $trackball;

			pause 4;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*] // -ET
{
	name	=freeze_small;

	script	=[[
			set $duration 6;
			set $radius .45;

			sfx create trackball #TARGET_KB 
				"must_update()scale(1)color0(.5,.5,1)homing()invisible()
				dur($duration)ts(2.5)afterlife(0)hit_target_only()";
			set $trackball #POP;
			sfx position_at $trackball @weapon_bone source;
			sfx friendly party $trackball;
			sfx start $trackball;

			sfx create fire #TARGET_KB 
				"must_update()color0(.5,.5,1)color1(0,0,0)alphafade(.5)max_radius(1)
				dur(.4)scale(1)count(40)max_displace(0)velocity(0,-10,0)
				accel(0,8,0)line()texture(b_sfx_sparkle01)ts(2)";
			sfx target #PEEK source;
			sfx attach_point #PEEK @kill_bone source;
			sfx start #POP;

			sfx create explosion #TARGET_KB 
				"must_update()ivel(0,1,0)texture(b_sfx_sparkle01)color0(.5,.5,1)
				radius(.5)dur(2)omni_dir()scale_range(.35,.5,0)count(25)";
			sfx start #POP;

			sfx create explosion #TARGET_KB 
				"must_update()ivel(0,1,0)color0(.2,.2,1)radius(.5)dur(2)
				omni_dir()scale_range(.25,.5,0)count(25)";
			sfx start #POP;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*] // -ET
{
	name	=death_blast_indicator;

	script	=[[
			sound play s_e_spell_death_blast_hit at #TARGET_POSITION dist 3 20;
			
			sfx create orbiter #TARGET
				"offset(0,1.5,0)scale(1)tin(0)tout(.2)color0(1,.5,.1)radius(0)
				texture(b_sfx_sparkle01)";
			sfx start #PEEK;
			set $orb #POP;
			
			sfx create cylinder #TARGET
				"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(.33)
				hp0(0,0,0)hp1(0,0,0)spin(16)rp0(-.1,4,2.5)rp1(-.2,8,5)
				dur(.33)color0(1,.5,.1)segments(24)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
			
			sfx create orbiter #TARGET
				"scale(.5)tin(0)tout(.2)color0(1,.5,.1)radius(0)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
			
			sfx create sray #TARGET 
				"must_update()ts(3)scale(.33)radius(.1)
				lmin(1)lmax(1)color0(0,0,0)color1(.9,.6,.1)theta(0,0,0)
				phi(1,1,1)wsmin(.1)wsmax(.1)wemin(.1)wemax(.1)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;

			sfx create explosion #TARGET 
				"srate(.001)must_update()texture(b_sfx_sparkle01)ts(.33)
				color0(.9,.3,.1)color1(.1,.2,.1)omni_dir()radius(.5)count(15)
				scale_range(2,2,0)scale(.1)omni_dir()fade_range(10,10,0)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
	
			pause .6;
			
			sfx create cylinder #TARGET
				"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(.33)
				hp0(0,0,0)hp1(0,0,0)spin(16)rp0(-.1,4,5)rp1(-.2,8,10)
				dur(.33)color0(1,.5,.1)segments(24)";
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx start #POP;
			
			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=death_blast;

	script	=[[
			sound play s_e_spell_death_blast_hit at #TARGET_POSITION dist 3 20;

			set $radius1 -.5,4,2.5;
			set $radius2 -1,8,5;

			sfx create orbiter #TARGET
				"scale(8)dur(.2)tin(0)tout(.2)color0(1,.5,.1)radius(0)
				texture(b_sfx_sparkle01)offset(0,.2,0)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create cylinder #TARGET
				"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(.33)
				hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
				dur(.66)color0(1,.5,.1)segments(24)offset(0,.2,0)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create flurry #TARGET
				"must_update()count(30)tin(0)tout(.5)dur(0.5)color0(1,.5,.1)
				grow_params(-.3,1.4,1.7)scale(1.35)delay(.07)offset(0,.2,0)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()texture(b_sfx_sparkle01)omni_dir()vmin(4)
				vmax(8)ts(.75)count(30)dur(3)scale(.75)color0(1,.6,.3)
				color1(0,0,0)rvel(0,2,0)ivel(0,0,0)scale_range(.35,.5,0)
				fade_range(.65,.65,0)delay(.07)offset(0,.2,0)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			camerashake camera_stomp s<frequency=20&magnitude_x=0&magnitude_y=.2&magnitude_z=0&duration=1&epicenter=#TARGET_GOID>;

			
			]];
}

[effect_script*] // -ET
{
	name	=explode_body;

	script	=[[
			sound play s_e_spell_explode_body_cast at #TARGET_POSITION dist 3 20;

			set $dur .5;
			set $ts 2;

			sfx create fire #TARGET_KB 
				"must_update()scale(.7)dur(2)color0(.3,.3,.3)color1(0,0,0)
				count(32)alphafade(.5)flamesize(2)max_radius(2)velocity(0,10,0)
				accel(0,10,0)";
			sfx start #POP;

			pause 1;

			sfx create lightsource #TARGET_KB 
				"iradius(5)radius(15)dur(.35)tin(.05)tout(.1)frequency(2)color0(1,.3,.05)color1(0,0,0)
				offset(0,1,0)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create polygonalexplosion #TARGET_KB 
				"omnidir()scale(.25)color0(1,.5,.2)color1(0,0,0)
				count(75)mag(25.5)displace(0,.475,0)radius(.725)
				rotrange(1000,1000,1000)ts(1.5)poly_sides(4)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create cylinder #TARGET_KB 
				"must_update()scale(1.2)texture(b_sfx_cyl_03)hp0(.1,.1,.1)
				hp1(.1,.1,.1)rp0(0,48,40)rp1(.25,48.25,47)tin(.20)tout(.5)
				dur(.2)color0(1,.3,.05)spin(15)segments(26)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET_KB 
				"must_update()count(32)color0(1,.3,.05)omni_dir()
				vmin(12)vmax(14)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET_KB 
				"must_update()count(32)color0(1,.3,.05)omni_dir()
				texture(b_sfx_sparkle01)vmin(12)vmax(14)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create flurry #TARGET_KB
				"must_update()count(30)tin(0)tout(.5)dur(0.27)color0(1,.3,.05)
				grow_params(.3,1.1,1.3)scale(1.75)delay(.07)ts(2)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create sray #TARGET_KB 
				"delay(.05)must_update()count(12)ts(10)offset(0,.1,0)dur(.07)instant()alpha(1,.4,.4)
				scale(.9)radius(.5)lmin(4)lmax(5)color0(1,.5,.2)color1(0,0,0)count(50)
				theta(0,0,0)phi(0,0,0)wsmin(.125)wsmax(.125)wemin(.125)wemax(.125)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create orbiter #TARGET_KB
				"delay(.025)scale(12)texture(b_sfx_sparkle01)radius(0)dur(.15)color0(1,.3,.05)tin(.06)tout(.06)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create orbiter #TARGET_KB
				"delay(.1)scale(3.4)texture(b_sfx_fireball-01)radius(0)dur(.35)color0(1,.8,.6)tin(.1)tout(.2)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create fire #TARGET_KB
				"delay(0)flamesize(1)min_radius(3)max_radius(6)velocity(0,.3,0)accel(0,0.04,0)
				color0(.5,.4,.3)color1(0,0,0)ts(5)scale(2.4)alphafade(1)max_displace(.8)min_displace(-.8)
				count(30)texture(b_sfx_fireball-01)dur(.2)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create fire #TARGET_KB
				"delay(.20)flamesize(1)min_radius(3)max_radius(6)velocity(0,.3,0)accel(0,-0.04,0)
				color0(.5,.35,.2)color1(0,0,0)ts(2)scale(2.5)alphafade(.11)max_displace(1)min_displace(-1)
				count(30)texture(b_sfx_smoke)dur(.8)instant()";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create fire #TARGET_KB
				"delay(.26)flamesize(1)min_radius(2)max_radius(5)velocity(0,.3,0)accel(0,-0.04,0)
				color0(.5,.4,.3)color1(0,0,0)ts(2)scale(2.5)alphafade(.11)max_displace(1)min_displace(-1)
				count(30)texture(b_sfx_smoke)dur(.8)instant()";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create fire #TARGET_KB
				"delay(.32)flamesize(1)min_radius(1)max_radius(4)velocity(0,.3,0)accel(0,0.04,0)
				color0(.5,.5,.5)color1(0,0,0)ts(2)scale(2.5)alphafade(.11)max_displace(1.2)min_displace(-1)
				count(30)texture(b_sfx_smoke)dur(.8)instant()";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create explosion #TARGET_KB 
				"delay(.2)scale(2)ts(.2)must_update()count(80)color0(.5,.4,.3)omni_dir()
				vmin(4)vmax(10)fade_range(4,8,0)scale_range(.2,.3,0)texture(b_sfx_smoke)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=redeem;

	script	=[[
			sound play s_e_spell_redeem_cast at #TARGET_POSITION dist 3 20;

			sfx create explosion #TARGET_KB
				"must_update()srate(.001)dur(1.33)scale(1)texture(b_sfx_sparkle01)
				color0(.1,.3,1)color1(.1,.2,.1)dir(0,1,0)ts(2)radius(1)
				scale_range(.4,.5,0)fade_range(2,2,0)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create flurry #TARGET_KB 
				"must_update()radius(.5)count(32)dur(1.33)color0(.1,.3,1)
				grow_params(0,2.4,3)";
			sfx freeze_targets #PEEK;
			sfx start #POP;

			sfx create flurry #TARGET_KB 
				"delay(.66)must_update()radius(.5)count(32)dur(.7)color0(.1,.3,1)
				grow_params(0,3,3)ts(3)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			sfx create fire #TARGET_KB
				"delay(.55)flamesize(1)min_radius(0)max_radius(6)velocity(0,.3,0)accel(0,0.04,0)
				color0(.3,.3,.6)color1(0,0,0)ts(2)scale(2)alphafade(.13)max_displace(.33)min_displace(0)
				count(30)dur(.8)";
			sfx freeze_targets #PEEK;
			sfx start #POP;
			
			pause 1;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=the_bomb;

	script	=[[
			camerashake camera_stomp s<frequency=20&magnitude_x=0&magnitude_y=.2&magnitude_z=0&duration=3&epicenter=#TARGET_GOID>;

			sfx create explosion #TARGET 
				"must_update()count(100)srate(0.001)dur(3)scale(1)color0(1,.2,.2)
				color1(0,0,0)dir(0,1,0)rvel(1,4,1)ivel(0,3,0)scale_range(.3,.5,0)";
			sfx start #POP;

			sfx create sray #TARGET 
				"must_update()dur(3)scale(.5)radius(1)lmin(1)lmax(1.5)
				color0(1,.2,.2)color1(0,0,0)wsmin(.3)wsmax(.3)wemin(.3)
				wemax(.3)";
			set $ray #POP;
			sfx start $ray;

			sfx create charge #SOURCE
			"must_update()count(50)dur(3)color0(1,.2,.2)centersize(2)";
			
			
			set $charge #POP;
			sfx start $charge;


			sfx create flurry #SOURCE
			"must_update()count(50)tin(.2)tout(2.5)dur(6)color0(1,.2,.2)
			grow_params(0,1,10)";
			
			
			sfx start #POP;

            pause 3;

            camerashake camera_stomp s<frequency=10&magnitude_x=0&magnitude_y=2&magnitude_z=0&duration=1&epicenter=#TARGET_GOID>;


            sfx destroy $charge;
            sfx destroy $ray;

            sfx create explosion #TARGET 
	            "must_update()count(100)dur(3)scale(2)color0(1,.2,.2)
	            color1(0,0,0)dir(0,1,0)rvel(6,4,6)ivel(0,1,0)scale_range(.3,.5,0)";
			sfx start #POP;


			]];
}
[effect_script*] // -ET
{
	name	=draw;

	script	=[[
			sound play s_e_spell_draw_cast at #TARGET_POSITION dist 5 30;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(8.57)radius(2.4)color0(.4,.2,.35)
				count(10)speed0(1.1,2,1.1)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(7.85)radius(2.2)color0(.44,.2,.35)
				count(10)speed0(1.2,2.2,1.2)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(7.25)radius(2)color0(.48,.2,.35)
				count(10)speed0(1.3,2.3,1.3)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(6.73)radius(1.8)color0(.52,.2,.35)
				count(10)speed0(1.4,2.4,1.4)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(6.28)radius(1.6)color0(.56,.2,.35)
				count(10)speed0(1.5,2.5,1.5)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(5.89)radius(1.4)color0(.6,.2,.35)
				count(10)speed0(1.6,2.6,1.6)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(5.54)radius(1.2)color0(.64,.2,.35)
				count(10)speed0(1.7,2.7,1.7)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			sfx create spe #TARGET 
				"must_update()tout(0)dur(5.24)radius(1)color0(.68,.2,.35)
				count(10)speed0(1.8,2.8,1.8)space0(.62,0,.62)space1(.62,0,.62)";
			sfx attach_point #PEEK @body_anterior target;
			sfx start #POP;

			]];
}
[effect_script*] // -ET
{
	name	=panic;

	script	=[[
			sound play s_e_spell_return_summoned_cast at #TARGET_POSITION dist 5 30;
			
			sfx create explosion #TARGET 
				"must_update()count(100)dur(3)scale(2)color0(.2,1,.2)
				color1(0,0,0)dir(0,1,0)rvel(6,4,6)ivel(0,1,0)scale_range(.3,.5,0)";
			sfx start #POP;
			
			]];
}
[effect_script*] // -ET
{
	name	=undermine;

	script	=[[
			sound play s_e_spell_undermine_cast at #TARGET_POSITION dist 5 30;

			sfx create explosion #TARGET 
				"must_update()use_fog()srate(.001)count(50)dur(1)scale(.4)
				color0(1,.2,.2)color1(0,0,0)dir(0,1,0)rvel(3,2,3)ivel(0,1,0)
				scale_range(.3,.5,0)";
			sfx start #POP;

			sfx create cylinder #TARGET
			"must_update()scale(.3)tin(.3)tout(.7)alpha(1)hp0(0,0,0)
			hp1(0,0,0)spin(16)rp0(4,4,0)rp1(4.5,4.5,0)dur(1)color0(1,.3,.3)
			segments(24)";
			
				
			sfx start #POP;

			pause .15;

			sfx create cylinder #TARGET
			"must_update()scale(.3)tin(.3)tout(.7)alpha(1)hp0(0,0,0)
			hp1(0,0,0)spin(16)rp0(3,3,0)rp1(3.5,3.5,0)dur(1)color0(1,.25,.25)
			segments(24)";
			
				
			sfx start #POP;

			pause .15;

			sfx create cylinder #TARGET
			"must_update()scale(.3)tin(.3)tout(.7)alpha(1)hp0(0,0,0)
			hp1(0,0,0)spin(16)rp0(2,2,0)rp1(2.5,2.5,0)dur(1)color0(1,.2,.2)
			segments(24)";
			
				
			sfx start #POP;

			pause .15;

			sfx create cylinder #TARGET
			"must_update()scale(.3)tin(.3)tout(.7)alpha(1)hp0(0,0,0)
			hp1(0,0,0)spin(16)rp0(1,1,0)rp1(1.5,1.5,0)dur(1)color0(1,.15,.15)
			segments(24)";
			
				
			sfx start #POP;

			]];
}

[effect_script*] // -ET
{
	name	=fireball_storm;

	script	=[[
			sound play s_e_spell_fireball_rain_cast at #SOURCE_POSITION dist 3 20;
	
			call fireball_base v<0 0 0> u<3>;
			waitfor script #POP #DEFAULT_TIMEOUT;

			]];
}

[effect_script*] // -ET
{
	name	=bombard;

	script	=[[
			///////////////////////////////////////////////////////////////////////////////
			// we call the base firebomb with some random offsets to make it shoot all over.
			set $size 2;

			//frandrange -$size $size frandrange -$size $size
			//frandrange -$size $size frandrange -$size $size
			//frandrange -$size $size frandrange -$size $size
			//frandrange -$size $size frandrange -$size $size

			call firebomb_base v<2 0 2> u<2>;
			set $shot1 #POP;

			call firebomb_base v<-2 0 2> u<2>;
			set $shot2 #POP;

			call firebomb_base v<2 0 -2> u<2>;
			set $shot3 #POP;

			call firebomb_base v<-2 0 -2> u<2>;
			set $shot4 #POP;

			call firebomb_base v<0 0 0> u<2>;
			set $shot5 #POP;

			waitfor script $shot5 #DEFAULT_TIMEOUT;
			
			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

			]];
}


[effect_script*] // -ET
{
	name	=meteor_master;

	script =[[

		sfx create fire #TARGET
			"must_update()offset(0,.2,0)dur(5)flamesize(2)count(100)
			color0(1,.5,.2)color1(0,0,0)velocity(0,1,0)accel(0,0,0)
			alphafade(.4)min_displace(.1)max_displace(.1)radius(3.2)
			max_radius(1)";
			
			
		set $fire #POP;
		sfx start $fire;

		///////////////////////////////
		// Hex.
		//call meteor_cross <phi(0)> <1,.2,0>
		//call meteor_cross <phi(1.05)> <1,.3,0>
		//call meteor_cross <phi(2.1)> <1,.4,0>
		//call meteor_cross <phi(3.14)> <1,.45,0>
		//call meteor_cross <phi(4.19)> <1,.35,0>
		//call meteor_cross <phi(5.24)> <1,.25,0>


		///////////////////////////////
		// Star.

		//call meteor_cross <phi(0)>
		//call meteor_cross <phi(1.257)>
		//call meteor_cross <phi(2.513)>
		//call meteor_cross <phi(3.77)>
		//call meteor_cross <phi(5.026)>

		//////////////////////
		//// half of the circle
		call meteor_cross s<phi(0)>;
		set $line1 #POP;
		call meteor_cross s<phi(1.57)>;
		set $line2 #POP;
		call meteor_cross s<phi(0.79)>;
		set $line3 #POP;
		call meteor_cross s<phi(2.36)>;
        set $line4 #POP;
		//
		/////////////////////////
		//// the rest
		//call meteor_cross <phi(3.93)>
		//call meteor_cross <phi(5.50)>
		//call meteor_cross <phi(3.14)>
		//call meteor_cross <phi(4.71)>

		////////////////////
		// half of the circle
		//call meteor_cross <phi(0)>
		//call meteor_cross <phi(.4)>
		//call meteor_cross <phi(3.54)>
		//call meteor_cross <phi(3.14)>
		//
		//call meteor_cross <phi(1.77)>
		//call meteor_cross <phi(4.91)>

		//call meteor_cross <phi(4.32)>

		//pause 5
		//call meteor_ball
		waitfor sig stop 6;
		sfx finish $fire;
		signal $line1 stop;
		signal $line2 stop;
		signal $line3 stop;
		signal $line4 stop;
		]];
}

[effect_script*] // -ET
{
	name	=meteor_cross;

	script =[[
		set $speed1 -1.57;
		set $speed2 1.57;
		set $radius 6;
		set $color 1,.5,.2;

		sfx create orbiter #TARGET 
			"must_update()iphi(0)radius(0)invisible()dur(30)";
		set $orb #POP;
		sfx snap_to_ground $orb;
		sfx start $orb;

		sfx create orbiter #TARGET 
			"must_update()scale(.5)texture(b_sfx_sparkle01)offset(0,.5,0)
			color0($color)iphi($speed1)radius($radius)dur(12)[0]";
		set $orb2 #POP;
		sfx rat $orb2;
		sfx target $orb2 $orb;
		sfx start $orb2;

		sfx create orbiter #TARGET 
			"must_update()scale(.5)texture(b_sfx_sparkle01)offset(0,.5,0)
			color0($color)iphi($speed2)radius($radius)dur(12)[0]";
		set $orb3 #POP;
		sfx rat $orb3;
		sfx target $orb3 $orb;
		sfx start $orb3;

		sfx create fire #TARGET 
			"must_update()line()color0($color)color1(0,0,0)dur(10)
			count(30)velocity(0,8,0)accel(0,8,0)alphafade(1.5)flamesize(5)
			max_radius(0)min_displace(0)max_displace(0)";
		set $fire #POP;
		sfx rat $fire;
		sfx target $fire $orb3;
		sfx target $fire $orb2;
		sfx start $fire;

	  	waitfor sig stop 6;

	  	sfx finish $orb;
	  	sfx finish $orb2;
	  	sfx finish $orb3;
	  	pause .2;
	  	sfx finish $fire;


		]];
}

[effect_script*] // -ET
{
	name	=meteor_explosion;

	script =[[
			set $scale [0];
			set $offset 0,0,0;

			sound play s_e_spell_meteor_hit at #TARGET_POSITION dist 15 45;

			sfx create sray #TARGET 
				"must_update()offset($offset)count(10)ts(8)offset(0,.5,0)
				dur(.1)scale($scale)radius(.5)lmin(1)lmax(1.5)color0(0,0,0)
				color1(.9,.6,.1)theta(0,0,0)phi(0,0,0)wsmin(0)wsmax(0)
				wemin(.1)wemax(.1)";
			sfx start #POP;

			sfx create sray #TARGET 
				"must_update()offset($offset)count(10)ts(8)offset(0,.5,0)
				dur(.1)scale($scale)radius(.5)lmin(1)lmax(1.5)color0(0,0,0)
				color1(.9,.6,.1)theta(0,0,0)phi(0,0,0)wsmin(0)wsmax(0)
				wemin(.1)wemax(.1)";
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()offset($offset)count(50)dur(3)scale($scale)
				texture(b_sfx_sparkle01)color0(.9,.3,.1)color1(.1,.2,.1)
				dir(0,1,0)rvel(6,4,6)ivel(0,3,0)scale_range(.3,.5,0)";
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()offset($offset)count(50)dur(3)scale($scale)
				color0(.9,.3,.1)color1(.1,.2,.1)dir(0,1,0)rvel(6,4,6)
				ivel(0,3,0)scale_range(.3,.5,0)";
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()offset($offset)scale($scale)dur(3)color0(.6,.3,.1)
				color1(0,0,0)count(20)alphafade(.5)flamesize(8)max_radius(6)
				velocity(0,10,0)accel(0,0,0)";
			sfx start #POP;

			sfx create fire #TARGET 
				"must_update()offset($offset)scale($scale)dark()delay(.5)
				grey_tex()dur(5)color0(.3,.3,.3)color1(0,0,0)count(20)
				alphafade(.05)flamesize(16)max_radius(16)velocity(0,1,0)
				accel(0,0,0)";
			sfx start #POP;
		]];
}

[effect_script*] // -ET
{
	name	=meteor_ball;

	script	=[[
		call meteor_master;
		set $cross #POP;
		set $scale 2;
		sound play s_e_spell_meteor_cast at #TARGET_POSITION dist 15 45;

		pause 4;
		sfx create orbiter #TARGET 
			"must_update()offset(0,0,0)iphi(0)radius(0)invisible()
			dur(30)";
		set $orb #POP;
		sfx snap_to_ground $orb;
		sfx start $orb;

		sfx create trackball #TARGET_KB 
			"must_update()invisible()accel(10)color0(.75,.4,.1)dur(#DEFAULT_TIMEOUT)
			afterlife(2)ts(2)";
		set $trackball #POP;
		//sfx rat $trackball
		//sfx target $trackball $orb

		randrange 0 1000;
		if ( #POP != 42)
		{
			sfx create orbiter #TARGET 
				"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)
				itheta(0)model(frag_glb_stone_01)model_smax(3)model_sin(.2)
				model_sout(.1)rot_inc(0,0,0)";
			set $rock #POP;
			sfx rat $rock;
			sfx target $rock $trackball;
			sfx attach $trackball $rock;
		}
		else
		{
			sfx create orbiter #TARGET 
				"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)
				itheta(0)model(frag_glb_bone_06)model_smax(6)model_sin(.2)
				model_sout(.1)rotate(180,0,0)rot_inc(0,0,0)";
			set $rock #POP;
			sfx rat $rock;
			sfx target $rock $trackball;
			sfx attach $trackball $rock;
		}

		sfx position_at $trackball @kill_bone source;
		sfx freeze_targets $trackball;
		sfx friendly party $trackball;
		sfx start $trackball;

		sfx create fire #SOURCE
			"must_update()scale($scale)flamesize(30)count(10)color0(.75,.4,.1)
			alphafade(4)max_displace(0)";
			
			
		set $fireb #POP;
		sfx rat $fireb;
		sfx target $fireb $trackball;
		sfx start $fireb;

		sfx create fire #SOURCE
			"must_update()scale($scale)flamesize(15)count(35)color0(.75,.4,.1)
			alphafade(1)max_displace(0)max_radius(15)";
			
			
		set $fire2 #POP;
		sfx rat $fire2;
		sfx target $fire2 $trackball;
		sfx start $fire2;

		sfx create fire #SOURCE
			"must_update()scale($scale)flamesize(5)count(30)color0(1,.4,.2)
			color1(0,.4,0)alphafade(.4)max_radius(15)max_displace(0)";
			
			
		set $fire3 #POP;
		sfx rat $fire3;
		sfx target $fire3 $trackball;
		sfx start $fire3;

		waitfor collision $trackball #DEFAULT_TIMEOUT;
		//set $collision_type #POP


		camerashake camera_stomp s<frequency=15&magnitude_x=0.0&magnitude_y=2&magnitude_z=0.0&duration=1.1&epicenter=#TARGET_GOID>;


		signal $cross stop;

		//get collision point $trackball
		//set $impact #POP

		call meteor_explosion f<3>;

		//call mushroom
		//sfx create cylinder -must_update()texture(b_sfx_bluestars_01)alpha(1)hp0(0,0,0)hp1(1,1,0)rp0(1,5,4)rp1(0,4,4)tout(1.5)dur(2)color0(1,0,0)spin(-2)segments(20) $impact
		//set $exp #POP
		//sfx snap_to_ground $exp
		//sfx start $exp

		//waitfor script #POP #DEFAULT_TIMEOUT

		waitfor script #POP #DEFAULT_TIMEOUT;
		]];
}

[effect_script*] // -ET
{
	name	=meteor_storm;

	script	=[[


		sfx create fire #TARGET
			"must_update()offset(0,.2,0)dur(5)flamesize(2)count(100)
			color0(1,.5,.2)color1(0,0,0)velocity(0,1,0)accel(0,0,0)
			alphafade(.4)min_displace(.1)max_displace(.1)radius(3.2)
			max_radius(1)";
			
			
		set $circle #POP;
		sfx start $circle;

		set $scale 2;
		sound play s_e_spell_meteor_cast at #TARGET_POSITION dist 15 45;
		pause 4;

		sfx create orbiter #TARGET 
			"must_update()offset(0,0,0)iphi(0)radius(0)invisible()
			dur(30)";
		set $orb #POP;
		sfx snap_to_ground $orb;
		sfx start $orb;

		sfx create trackball #TARGET_KB 
			"must_update()invisible()accel(10)color0(.75,.4,.1)dur(#DEFAULT_TIMEOUT)
			afterlife(2)ts(3)";
		set $trackball #POP;
		//sfx rat $trackball
		//sfx target $trackball $orb

		sfx create orbiter #TARGET 
			"must_update()scale(2)dur(10)radius(0)theta(0)iphi(0)
			itheta(0)model(frag_glb_stone_01)model_smax(3)model_sin(.2)
			model_sout(.1)rot_inc(0,0,0)";
		set $skull #POP;
		sfx rat $skull;
		sfx target $skull $trackball;
		sfx attach $trackball $skull;



		sfx position_at $trackball @kill_bone source;
		sfx freeze_targets $trackball;
		sfx friendly party $trackball;
		sfx start $trackball;

		sfx create fire #SOURCE
			"must_update()scale($scale)flamesize(30)count(10)color0(.75,.4,.1)
			alphafade(4)max_displace(0)";
			
			
		set $fireb #POP;
		sfx rat $fireb;
		sfx target $fireb $trackball;
		sfx start $fireb;

		sfx create fire #SOURCE
			"must_update()scale($scale)flamesize(15)count(35)color0(.75,.4,.1)
			alphafade(1)max_displace(0)max_radius(15)";
			
			
		set $fire2 #POP;
		sfx rat $fire2;
		sfx target $fire2 $trackball;
		sfx start $fire2;

		sfx create fire #SOURCE
			"must_update()scale($scale)flamesize(5)count(30)color0(1,.4,.2)
			color1(0,.4,0)alphafade(.4)max_radius(15)max_displace(0)";
			
			
		set $fire3 #POP;
		sfx rat $fire3;
		sfx target $fire3 $trackball;
		sfx start $fire3;

		waitfor collision $trackball #DEFAULT_TIMEOUT;
		set $collision_type #POP;

		camerashake camera_stomp s<frequency=20&magnitude_x=0.0&magnitude_y=2&magnitude_z=0.0&duration=1.5&epicenter=#TARGET_GOID>;

		get collision point $trackball;
		set $impact #POP;

		call meteor_explosion f<3>;
		sfx finish $circle;

		//call mushroom
		//sfx create cylinder -must_update()texture(b_sfx_bluestars_01)alpha(1)hp0(0,0,0)hp1(1,1,0)rp0(1,5,4)rp1(0,4,4)tout(1.5)dur(2)color0(1,0,0)spin(-2)segments(20) $impact
		//set $exp #POP
		//sfx snap_to_ground $exp
		//sfx start $exp

		//waitfor script #POP #DEFAULT_TIMEOUT

		waitfor script #POP #DEFAULT_TIMEOUT;
	]];
}

[effect_script*]
{
	name	=dragon_fire;

	script	=[[
			sound play s_e_dragon_fire at #TARGET_POSITION dist 3 25;
		
			set $velocity 0,0,40;
			set $accel 0,0,0;

			set $flames1 60;
			set $flames2 80;

			sfx create fireb #SOURCE 
				"offset(0,.2,.5)fctrl(0,0,7)flamesize(1)alphafade(.5)ts(.6)color0(.85,.6,.6)
				velocity($velocity)accel($accel)cvel(1)lower_r0(0)lower_r1(0)
				upper_r0(0)upper_r1(20)count(80)texture(b_sfx_fireball-01)max_displace(2)min_displace(-2)";
			sfx friendly party #PEEK;
			set $fire1 #PEEK;
			sfx start #POP;

			sfx create fireb #SOURCE 
				"offset(0,.2,.5)fctrl(0,0,7)flamesize(2)alphafade(.5)ts(.6)color0(.85,.6,.6)
				velocity($velocity)accel($accel)cvel(1)lower_r0(0)lower_r1(0)start_rate(10)
				upper_r0(0)upper_r1(20)count(30)texture(b_sfx_fireball-02)max_displace(3)min_displace(-3)";
			sfx friendly party #PEEK;
			set $fire2 #PEEK;
			sfx start #POP;

			sfx create fireb #SOURCE 
				"offset(0,.2,.5)fctrl(0,0,0)flamesize(1)alphafade(.5)ts(1.6)color0(.85,.6,.6)
				velocity(-10,0,5)accel(0,0,-10)cvel(1)lower_r0(0)lower_r1(0)max_displace(3)min_displace(-3)
				upper_r0(10)upper_r1(20)count(30)start_rate(10)texture(b_sfx_fireball-01)";
			sfx friendly party #PEEK;
			set $fire3 #PEEK;
			sfx start #POP;
			
			sfx create fireb #SOURCE 
				"offset(0,.2,.5)fctrl(0,0,0)flamesize(1)alphafade(.5)ts(1.6)color0(.85,.6,.6)
				velocity(10,0,5)accel(0,0,-10)cvel(1)lower_r0(0)lower_r1(0)max_displace(3)min_displace(-3)
				upper_r0(10)upper_r1(20)count(30)start_rate(10)texture(b_sfx_fireball-01)";
			sfx friendly party #PEEK;
			set $fire4 #PEEK;
			sfx start #POP;
			
			sfx create fireb #SOURCE 
				"offset(0,.2,.5)fctrl(0,0,2)flamesize(.1)alphafade(.45)ts(.6)color0(1,.9,.8)
				velocity($velocity)accel($accel)cvel(1)lower_r0(4)lower_r1(4)max_displace(6)min_displace(-6)
				upper_r0(10)upper_r1(30)count(80)texture(b_sfx_sparkle01)[0]";
			sfx friendly party #PEEK;
			set $fire5 #PEEK;
			sfx start #POP;
			
			sfx create fireb #SOURCE 
				"offset(0,.2,.5)fctrl(0,0,2)flamesize(.2)alphafade(.45)ts(.6)color0(0,0,0)
				velocity($velocity)accel($accel)cvel(1)lower_r0(3)lower_r1(3)max_displace(3)min_displace(-3)
				upper_r0(10)upper_r1(30)count(80)dark()";
			sfx friendly party #PEEK;
			set $fire6 #PEEK;
			sfx start #POP;
			
			pause [2];
			
			sfx finish $fire1;
			sfx finish $fire2;
			sfx finish $fire3;
			sfx finish $fire4;
			sfx finish $fire5;
			sfx finish $fire6;
			
			pause 6.5;
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*]
{
	name	=blowtorch;

	script	=[[
			sound play s_e_spell_fire_rain_cast at #SOURCE_POSITION dist 3 20;

			sfx create fire #SOURCE
			"must_update()instant()flamesize(2)count(30)
			color0(.75,.3,.1)color1(0,0,0)velocity(0,1,0)accel(0,0,0)
			alphafade(2)min_displace(0)max_displace(0)radius(1)
			max_radius(0)[1]";
			
			
			set $fire #POP;
			sfx start $fire;

			sfx create fireb #SOURCE 
				"must_update()end_rate(100)offset(.4,0,.8)color0(.85,.22,.06)
				fctrl(0,0,15)velocity(10,-10,40)accel(0,10,0)
				cvel(1)alphafade(1)lower_r0(.5)lower_r1(.5)upper_r0(5)
				upper_r1(15)count(50)flamesize(1)[0][1]";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"must_update()end_rate(200)offset(0,0,1)color0(.75,.3,.1)
				fctrl(0,0,15)velocity(0,0,40)accel(0,20,0)cvel(1)
				alphafade(1)lower_r0(1)lower_r1(1)upper_r0(10)upper_r1(30)
				count(100)flamesize(2)[0][1]";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"must_update()end_rate(100)offset(-.4,0,.8)color0(.85,.22,.06)
				fctrl(0,0,15)velocity(-10,-10,40)accel(0,10,0)
				cvel(1)alphafade(1)lower_r0(.5)lower_r1(.5)upper_r0(5)
				upper_r1(15)count(50)flamesize(1)[0][1]";
			sfx start #POP;
			]];
}
[effect_script*]
{
	name	=flame;

	script	=[[
			sound play s_e_spell_flame_cast at #SOURCE_POSITION dist 10 30;
			sound play s_e_spell_burnbody_cast at #SOURCE_POSITION dist 10 30;
			
			sfx create fireb #SOURCE 
				"offset(0,.2,.5)must_update()color0(0,0,0)fctrl(0,0,15)
				velocity(0,0,20)accel(0,0,0)cvel(1)alphafade(1)end_rate(1000)
				lower_r0(9)lower_r1(9)upper_r0(12)upper_r1(12)count(30)
				flamesize(0)[0][1]max_displace(30)min_displace(-30)";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"ts(.5)offset(0,.2,.5)must_update()color0(.75,.5,.3)
				fctrl(0,0,15)velocity(0,0,50)accel(0,0,0)cvel(1)
				alphafade(2)lower_r0(2)lower_r1(2)upper_r0(0)upper_r1(100)
				count(50)flamesize(2)[1]max_displace(30)min_displace(-30)";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"ts(.5)offset(0,.2,1.2)must_update()color0(1,.3,.066)
				fctrl(0,0,15)velocity(0,0,40)accel(0,0,0)cvel(1)
				alphafade(3)lower_r0(5)lower_r1(5)upper_r0(0)upper_r1(200)
				count(50)flamesize(2)[1]max_displace(30)min_displace(-30)";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"ts(.5)offset(0,.2,1.6)must_update()color0(1,.2,.033)
				fctrl(0,0,15)velocity(0,0,35)accel(0,0,0)cvel(1)
				alphafade(3)lower_r0(8)lower_r1(8)upper_r0(0)upper_r1(300)
				count(50)flamesize(2)[1]max_displace(30)min_displace(-30)";
			sfx start #POP;

			]];
}
[effect_script*]
{
	name	=inferno;

	script	=[[
			sound play s_e_spell_flame_cast at #SOURCE_POSITION dist 10 30;
			sound play s_e_spell_burnbody_cast at #SOURCE_POSITION dist 10 30;
			
			sfx create fireb #SOURCE 
				"offset(0,.2,.5)must_update()color0(0,0,0)fctrl(0,0,0)
				velocity(0,0,40)accel(0,0,0)cvel(1)alphafade(1)end_rate(1000)
				lower_r0(12)lower_r1(12)upper_r0(12)upper_r1(12)count(30)
				flamesize(2)[0][1]max_displace(15)min_displace(-15)";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"ts(.5)offset(0,.2,.5)must_update()color0(1,.9,.8)
				fctrl(0,0,25)velocity(0,0,70)accel(0,0,0)cvel(1)texture(b_sfx_fireball-01)
				alphafade(2)lower_r0(0)lower_r1(0)upper_r0(0)upper_r1(100)
				count(50)flamesize(1)[1]max_displace(5)min_displace(-5)";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"ts(.5)offset(0,.2,1.2)must_update()color0(1,.9,.8)texture(b_sfx_fireball-02)
				fctrl(0,0,15)velocity(0,0,65)accel(0,0,0)cvel(1)
				alphafade(3)lower_r0(3)lower_r1(3)upper_r0(0)upper_r1(400)
				count(50)flamesize(2)[1]max_displace(30)min_displace(-30)";
			sfx start #POP;

			sfx create fireb #SOURCE 
				"ts(.5)offset(0,.2,1.6)must_update()color0(1,.1,.05)
				fctrl(0,0,15)velocity(0,0,60)accel(0,0,0)cvel(1)
				alphafade(3)lower_r0(5)lower_r1(5)upper_r0(0)upper_r1(600)
				count(50)flamesize(2)[1]max_displace(50)min_displace(-50)";
			sfx start #POP;
			]];
}
[effect_script*]
{
	name	=incinerate;

	script	=[[
			sound play s_e_spell_flame_cast at #SOURCE_POSITION dist 3 20;

			sfx create spe #TARGET_KB 
				"must_update()offset(0,.5,0)tin(1)tout(1)ts(1)color0(.8,.5,.2)
				texture(b_sfx_splotches_02)radius(.6)scale(.2)count(100)
				index0(0,-1.57,1.57)index1(0,-1.57,1.57)speed0(11,0,11)
				speed1(10,0,10)space0(.1256,.02612,.1256)space1(.1256,.02612,.1256)[1]";
			sfx start #POP;

			sfx create fire #TARGET_KB 
				"must_update()color0(.8,.5,.2)color1(0,0,0)count(32)
				alphafade(.5)flamesize(6)max_radius(10)velocity(0,10,0)
				accel(0,10,0)[0][1]";
			sfx start #POP;

			]];
}

[effect_script*]
{
	name	=acid_cloud;

	script	=[[
			sound play s_e_spell_acid_cloud_cast at #SOURCE_POSITION dist 3 20;

			set $scale 2;

			/////////////////////////////////////////
			// This is the main trackball for the effect, everything is based off of this.
			sfx create trackball #TARGET_KB 
				"must_update()invisible()no_collide()velocity(2)accel(1)
				scale(.8)homing()damped()kdamp(.01)[1]";
			set $trackball #POP;
			sfx position_at $trackball @weapon_bone source;

			sfx create fire #TARGET 
				"must_update()offset(0,0,-.66)delay(.1)
				scale($scale)color0(.1,.15,.05)color1(.02,.02,.02)count(45)velocity(0,-4,0)
				texture(b_sfx_mist_01)accel(0,10,0)alphafade(.45)flamesize(4)max_radius(25)
				min_displace(-.33)max_displace(.66)";
			set $fire #POP;
			sfx rat $fire;
			sfx target $fire $trackball;
			sfx friendly party $fire;
			sfx attach $trackball $fire;

			sfx create fire #TARGET 
				"must_update()offset(0,0,-.66)delay(.2)scale($scale)texture(b_sfx_mist_01)
				color0(.4,.4,.15)count(15)velocity(0,-15,0)accel(0,40,0)max_displace(.33)
				alphafade(.85)flamesize(.1)max_radius(16)fctrl(0,0,0)min_displace(-1)";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $trackball;
			sfx friendly party $fire2;
			sfx attach $trackball $fire2;

			sfx create fire #TARGET 
				"must_update()offset(0,0,-.66)delay(.3)scale($scale)texture(b_sfx_mist_01)max_displace(.85)
				color0(.35,.75,.15)color1(.05,.05,.05)count(15)velocity(0,5,0)accel(0,0,0)alphafade(.75)
				flamesize(.1)min_radius(22)max_radius(24)[0]min_displace(-0.8)fctrl(0,0,0)";
			set $fire3 #POP;
			sfx rat $fire3;
			sfx target $fire3 $trackball;
			sfx friendly party $fire3;
			sfx attach $trackball $fire3;

			sfx start $trackball;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*]
{
	name	=acid_gas;

	script	=[[
			sound play s_e_spell_acid_cloud_cast at #SOURCE_POSITION dist 3 20;

			set $scale 1;
			
			sfx create fire #TARGET_KB
				"must_update()color0(.1,.15,.05)color1(.02,.02,.02)count(45)velocity(0,-4,0)
				texture(b_sfx_mist_01)accel(0,10,0)alphafade(.45)flamesize(4)max_radius(8)
				min_displace(-.33)max_displace(.66)[1]";
			sfx start #POP;

			sfx create fire #TARGET_KB
				"ts(.3)must_update()scale($scale)color0(.6,.6,.2)count(12)
				velocity(0,2,0)accel(0,0,0)alphafade(.85)flamesize(.3)
				max_radius(6)[1]";
			sfx start #POP;

			sfx create fire #TARGET_KB
				"must_update()scale($scale)color0(.25,.5,.1)count(30)
				velocity(0,1,0)accel(0,0,0)alphafade(.15)flamesize(.1)
				min_radius(6)max_radius(8)[0][1]";
			sfx start #POP;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;
			]];
}
[effect_script*] // -ET
{
	name	=dancing_zap;

	script	=[[
			sound play s_e_spell_spark_cast at #SOURCE_POSITION dist 3 25;

			sfx create explosion #SOURCE
				"ts(.3)must_update()radius(0)texture(b_sfx_snow_01)color0(.7,.7,1)
				color1(0,.1,.1)ivel(0,.25,0)vmin(3)vmax(4)omni_dir()
				fade_range(0,1,0)scale(.75)";
				
			set $offset 2.5;			
			
			sfx attach_point #PEEK @weapon_bone target;
			sfx start #POP;

			frandrange f<-$offset> f<$offset>; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			frandrange -2.5 2.5; frandrange -2.5 2.5;
			call dancing_zap_base v<#POP 0 #POP> [0] [1];
			
			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			]];
}

[effect_script*] // -ET
{
	name	=dancing_zap_base;

	script	=[[
			// sound play s_e_spell_iron_fist_cast at #TARGET_POSITION

			frandrange .6 1;
			frandrange .2 .6;
			frandrange -1 1;

			sfx create trackball #TARGET_KB 
				"invisible()no_collide()velocity(3)spin(#POP)radius(#POP)
				must_update()ts(#POP)accel(0)color0(.3,.5,1)scale(.2)
				afterlife(.5)rvel_max(0)[2]";
			set $trackball #POP;
			sfx offset_bone $trackball [0] target;
			sfx position_at $trackball @weapon_bone source;
			sfx start $trackball;

			frandrange .2 .5;
			frandrange 0 6.28;
			frandrange -1 1;

			sfx create orbiter #TARGET
				"radiusi(1)free()smooth()invisible()iphi(#POP)phi(#POP)
				radius(#POP)";
			
			sfx rat #PEEK;
			sfx target #PEEK $trackball;
			set $orb #PEEK;
			sfx attach $trackball #POP;

			sfx create fire #TARGET
				"alphafade(1)ts(1)max_radius(0.1)min_displace(0)max_displace(0)
				velocity(0,0,0)accel(0,0,0)count(6)scale(.75)color0(.3,.5,1)
				color1(0,.05,.05)texture(b_sfx_002)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx attach $trackball #POP;

			sfx create fire #TARGET
				"flamesize(2)ts(3)max_radius(3)min_displace(0)max_displace(0)
				velocity(0,0,0)accel(0,0,0)count(15)scale(.5)color0(.5,.7,1)
				color1(0,.05,.05)texture(b_sfx_033)";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx attach $trackball #POP;

			sfx create fire #TARGET
				"flamesize(.1)ts(1)max_radius(16)min_displace(-3)max_displace(3)
				velocity(0,0,0)accel(0,0,0)count(15)scale(.5)color0(.5,.7,1)
				color1(0,.05,.05)texture(b_sfx_sparkle01)[1]";
			
			sfx rat #PEEK;
			sfx target #PEEK $orb;
			sfx attach $trackball #POP;

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			]];
}
[effect_script*]
{
	name	=flamehands;  //--- creates flaming hands effect, small, slowburning

	script	=[[
			sfx create fire //@weapon_bone
			-must_update()ignite()ts(.5)count(50)scale(.25)color0(1,.6,0)velocity(0,0,0)accel(0,0,0)alphafade(.85)instant()
				#SOURCE;
			sfx friendly party #PEEK;
			sfx attach_point #PEEK @weapon_bone target;
			set $flame1 #POP;
			sfx start $flame1;

			sfx create fire //@shield_bone
			-must_update()ignite()ts(.5)count(50)scale(.25)color0(1,.6,0)velocity(0,0,0)accel(0,0,0)alphafade(.85)instant()
				#SOURCE;
			sfx friendly party #PEEK;
			sfx attach_point #PEEK @shield_bone target;
			set $flame2 #POP;
			sfx start $flame2;

			]];
}

[effect_script*]
{
	name	=energy_globe_small;

	script	=[[
			sfx create trackball #TARGET_KB 
				"must_update()color0(0,0,0)scale(0)ts(1.5)";
			set $ball #POP;

			sfx position_at $ball @weapon_bone source;

			frandrange -9 9; frandrange -9 9; frandrange -9 9;
			frandrange .7 1; frandrange .1 .25; frandrange .1 .25;
			sfx create sphere #SOURCE
			"must_update()color0(#POP,#POP,#POP)dur(8)subd(2)irotate(#POP,#POP,#POP)
			scale(.2)tin(.1)";
			
				
			set $sphere1 #POP;
			frandrange -9 9; frandrange -9 9; frandrange -9 9;
			frandrange .7 1; frandrange .53 1; frandrange .53 1;
			sfx create sphere #SOURCE
			"must_update()color0(#POP,#POP,#POP)dur(8)subd(1)irotate(#POP,#POP,#POP)
			scale(.1)tin(.1)";
			
				
			set $sphere2 #POP;

			//sfx create lightsource -must_update()color0(.2,.2,.7) #SOURCE
			//set $light #POP

			//sfx rat $light
			sfx rat $sphere1;
			sfx rat $sphere2;

			//sfx target $light	$ball
			sfx target $sphere1 $ball;
			sfx target $sphere2 $ball;

			//sfx attach $ball	$light
 			sfx attach $ball	$sphere1;
 			sfx attach $ball	$sphere2;

			sfx friendly party $ball;

			sfx start $ball;

			waitfor collision $ball #DEFAULT_TIMEOUT;
			set $collision_is #POP;

			if ( $collision_is == #TERRAIN_COLLISION )
			{
				get collision point $ball;
				sfx create polygonalexplosion #POP 
					"must_update()color0(.1,.1,.7)count(30)scale(.275)poly_sides(7)";
				get collision point $ball;
				sfx create polygonalexplosion #POP 
					"must_update()color0(.5,.5,.7)count(10)scale(.172)poly_sides(7)";
				set $explosion1 #POP;
				set $explosion2 #POP;

				get collision direction $ball;
				sfx direction $explosion1 #PEEK;
				sfx direction $explosion2 #PEEK;

                sfx start $explosion1;
                sfx start $explosion2;

			}
			else
			{
				if ( $collision_is == #OBJECT_COLLISION )
				{

				get collision target $ball target;

				sfx create polygonalexplosion #TARGET
				"must_update()color0(.1,.1,.7)count(30)scale(.275)poly_sides(7)";
				
					
				sfx create polygonalexplosion #TARGET
				"must_update()color0(.5,.5,.7)count(10)scale(.172)poly_sides(7)";
				
					
				set $explosion1 #POP;
				set $explosion2 #POP;

				get collision direction $ball;
				sfx direction $explosion1 #PEEK;
				sfx direction $explosion2 #PEEK;

                sfx start $explosion1;
                sfx start $explosion2;

				}
			}

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}




[effect_script*]
{
	name	=bolts2;

	script	=[[
			sfx create lightning #TARGET 
				"dur(.35)bolt_life(.1)minsubd(5)";
			set $lightning #POP;

			sfx target $lightning target;
			sfx target $lightning source;
			sfx target $lightning target;
			sfx target $lightning source;

			sfx start $lightning;

			sound play s_e_lightning;

			pause .35;

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}


[effect_script*]
{
	name	=energy_ball;

	script	=[[
			sound play s_e_spell_energy_ball_cast at #SOURCE_POSITION dist 3 35;

			sfx create trackball #TARGET_KB 
				"must_update()color0(0,0,1)ts(2.5)scale(.7)";
			set $ball #POP;

			sfx position_at $ball @weapon_bone source;

			sfx create lightsource #SOURCE 
				"must_update()color0(0,0,1)tin(0)";
			set $blue_light #POP;

			sfx create flurry #SOURCE 
				"must_update()count(10)dur(2)ts(9)tin(0)tout(0)radius(.3)
				color0(.5,.5,1)";
			set $sparkles #POP;

			sfx rat $blue_light;
			sfx rat $sparkles;

			sfx target $blue_light $ball;
			sfx target $sparkles $ball;
			sfx attach $ball $blue_light;
			sfx attach $ball $sparkles;

			sfx friendly party $ball;

			sfx start $ball;

			waitfor collision $ball #DEFAULT_TIMEOUT;
			set $collision_is #POP;

			if ( $collision_is == #TERRAIN_COLLISION )
			{

				get collision point $ball;
				sfx create explosion #POP 
					"must_update()color0(.2,.2,1)scale(.6)count(16)";
				set $exp1 #POP;
				get collision point $ball;
				sfx create explosion #POP 
					"must_update()color0(1,1,1)scale(.6)count(16)";
				set $exp2 #POP;

				//get collision point $ball
				//sound play s_e_spell_energy_ball_hit at #POP dist 1 15

				get collision direction $ball;
				sfx direction $exp1 #PEEK;
				sfx direction $exp2 #PEEK;

				sfx start $exp1;
				sfx start $exp2;

			}
			else
			{
				if ( $collision_is == #OBJECT_COLLISION )
				{
				get target_position $ball target;
				sound play s_e_spell_energy_ball_hit at #POP;

				get collision target $ball target;
				sfx create flurry #TARGET_KB 
					"must_update()count(30)dur(.4)ts(.1)tin(0)tout(0)radius(1.5)
					color0(.2,.2,1)grow_params(1,.8,0)";
				sfx start #POP;

				sfx create cylinder #TARGET_KB
					"must_update()texture(b_sfx_blueflare_01)hp0(0,0,0)hp1(1,1,0)
					spin(12)rp0(0,1,1)rp1(0,3,3)dur(1)scale(.75)color0(.2,.2,1)
					offset(0,-.5,0)";
				sfx start #POP;
				
				sfx create cylinder #TARGET_KB
					"must_update()texture(b_sfx_blueflare_01)hp0(1,1,0)hp1(0,0,0)
					spin(-12)rp0(0,1,1)rp1(0,3,3)dur(1)scale(.75)color0(.2,.2,1)
					offset(0,-.5,0)";
				sfx start #POP;

				pause .2;

				sfx create cylinder #TARGET_KB
					"must_update()texture(b_sfx_blueflare_01)hp0(0,0,0)hp1(1,1,0)
					spin(12)rp0(0,1,1)rp1(0,3,3)dur(1)scale(.75)color0(.4,.4,1)
					offset(0,-.5,0)";
				sfx start #POP;
				
					
				sfx create cylinder #TARGET_KB
					"must_update()texture(b_sfx_blueflare_01)hp0(1,1,0)hp1(0,0,0)
					spin(-12)rp0(0,1,1)rp1(0,3,3)dur(1)scale(.75)color0(.4,.4,1)
					offset(0,-.5,0)";
				sfx start #POP;

				pause .2;

               	sfx create explosion #TARGET_KB 
	               	"must_update()texture(b_sfx_sparkle01)omni_dir()dur(1)
	               	color0(.4,.4,1)scale(1.2)count(10)";
				sfx start #POP;

				sfx create explosion #TARGET_KB 
					"must_update()texture(b_sfx_sparkle01)offset(0,.1,0)
					omni_dir()dur(1)color0(.8,.8,1)scale(1.2)count(10)";
				sfx start #POP;


				}
			}

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}




[effect_script*]
{
	name	=slow;

	script	=[[
			sfx create spe #TARGET
			 "dur(4)radius(.4)space0(.5,.3,.5)space1(.5,.3,.5)count(13)
			 color0(1,1,0)offset(0,-.3,0)scale(.08)";
			 
				

			sfx create spe #TARGET
			"dur(4)radius(.4)space0(.5,.3,.5)space1(.5,.3,.5)count(13)
			color0(1,1,0)scale(.08)";
			
				

			sfx create spe #TARGET
			"dur(4)radius(.4)space0(.5,.3,.5)space1(.5,.3,.5)count(13)
			color0(1,1,0)offset(0,.3,0)scale(.08)";
			
				

			sfx create spe #TARGET
			"dur(4)radius(.4)space0(.5,.3,.5)space1(.5,.3,.5)count(13)
			color0(1,1,0)offset(0,.5,0)scale(.08)";
			
				

			sfx start #POP; 	sfx start #POP;	sfx start #POP;	sfx start #POP;

			sound play s_e_l_saber loop;
			pause 4;
			sound stop #POP;
			]];
}




[effect_script*]
{
	name	=energy_ball2;

	script	=[[
			sound play s_e_spell_nova_strike_cast_SED at #SOURCE_POSITION dist 3 35;

			sfx create trackball #TARGET_KB 
				"homing()radius(.3)spin(-.6)theta(1.5708)color0(.4,.3,1)";
			set $ball #POP;
			sfx position_at $ball @weapon_bone source;
			sfx friendly party $ball;
			sfx start $ball;

			sfx create explosion #SOURCE 
				"srate(.001)vmin(16)vmax(16)omni_dir()ts(.45)scale(.4)
				scale_range(.6,1,0)texture(b_sfx_sparkle01)color0(.9,.8,1)
				color1(0,0,0)radius(.5)fade_range(8,8,0)";
			sfx rat #PEEK;
			sfx target #PEEK $ball;
			sfx attach $ball #PEEK;
			
			sfx create flurry #TARGET
				"delay(0)color0(.3,.3,1)scale(.65)tin(.1)tout(.1)iamp(1)amplitude(2)count(15)ts(3)";
			sfx rat #PEEK;
			sfx target #PEEK $ball;
			sfx attach $ball #PEEK;
			
			sfx create lightsource #TARGET 
				"color0(.1,.1,.8)tin(.2)tout(.1)radius(4)";
			sfx rat #PEEK;
			sfx target #PEEK $ball;
			sfx attach $ball #PEEK;
			
			waitfor collision $ball #DEFAULT_TIMEOUT;
			set $collision_type #POP;

			if ( $collision_type == #TERRAIN_COLLISION )
			{
				get collision point $ball;
				sfx create flurry #POP
					"grow_params(0,3,6)color0(.3,.3,1)dur(.6)iphi(0)itheta(0)
					iamp(0)";
				sfx start #POP;
				
				get collision point $ball;
				sfx create explosion #POP
					"vmin(6)vmax(12)omni_dir()ts(.5)scale(.4)
					scale_range(.6,1,0)texture(b_sfx_sparkle01)color0(.9,.8,1)
					color1(0,0,0)radius(.5)fade_range(1,1,0)";
				sfx start #POP;
				
				get collision point $ball;
				sfx create explosion #POP
					"vmin(6)vmax(12)omni_dir()ts(.5)scale(.4)
					scale_range(.4,.66,0)color0(.9,.8,1)
					color1(0,0,0)radius(.5)fade_range(1,1,0)";
				sfx start #POP;
			}
			else if ( $collision_type == #OBJECT_COLLISION )
			{
				get collision target $ball target;
				sfx create flurry #TARGET_KB
					"grow_params(0,3,6)color0(.3,.3,1)dur(1)iphi(0)itheta(0)
					iamp(0)";
				sfx start #POP;
				
				get collision target $ball target;
				sfx create explosion #TARGET_KB 
					"vmin(6)vmax(12)omni_dir()ts(.5)scale(.4)
					scale_range(.6,1,0)texture(b_sfx_sparkle01)color0(.9,.8,1)
					color1(0,0,0)radius(.5)fade_range(1,1,0)";
				sfx start #POP;
				
				get collision target $ball target;
				sfx create explosion #TARGET_KB 
					"vmin(6)vmax(12)omni_dir()ts(.5)scale(.4)
					scale_range(.4,.66,0)color0(.9,.8,1)
					color1(0,0,0)radius(.5)fade_range(1,1,0)";
				sfx start #POP;
			}

			worldmsg WE_SPELL_SYNC_END #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*]
{
	name	=spe_test; // try this with a star texture. -ET

	script	=[[
			sfx create spe #TARGET 
				"texture(b_i_glb_ring-01)radius(.6)scale(.2)count(100)
				dur(8)index0(0,-1.57,1.57)index1(0,-1.57,1.57)speed0(5,1,5)
				speed1(5,1,5)space0(.0628,.01256,.0628)space1(.0628,.01256,.0628)";
			sfx start #POP;

		]];
}

[effect_script*]
{
	name	=spe_test2; // try this with a star texture. -ET

	script	=[[
			sfx create spe #TARGET 
				"texture(b_sfx_star_01)radius(.6)scale(.2)count(100)
				dur(8)index0(0,-1.57,1.57)index1(0,-1.57,1.57)speed0(5,1,5)
				speed1(5,1,5)space0(.0628,.01256,.0628)space1(.0628,.01256,.0628)";
			sfx start #POP;

		]];
}

[effect_script*]
{
	name	=spe_test3; // try this with a star texture. -ET

	script	=[[
			sfx create spe #TARGET 
				"color0(1,.3,.2)texture(b_sfx_splotches_02)radius(.6)
				scale(.2)count(100)dur(8)index0(0,-1.57,1.57)index1(0,-1.57,1.57)
				speed0(5,1,5)speed1(5,1,5)space0(.0628,.01256,.0628)
				space1(.0628,.01256,.0628)";
			sfx start #POP;

		]];
}


[effect_script*]
{
	name	=spark_test;

	script	=[[
			sfx create explosion #TARGET 
				"srate(.1)";
			sfx start #POP;

		]];
}


[effect_script*] // -ET
{
	name	=sparkle_ring; // $$$ test needs new orientation.

	script	=[[


			sfx create cylinder #TARGET 
				"texture(b_sfx_bluestars_01)alpha(1)hp0(.3,.3,-3.5)hp1(0,0,0)
				rp0(2.5,2.5,3)rp1(3,3,3.5)tin(.2)tout(1.5)dur(10)color0(1,1,1)
				spin(2)segments(20)rotate(0,0,70)irotate(0,30,30)bone_orient()";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture(b_sfx_bluestars_01)alpha(1)hp0(-.3,-.3,3.5)
				hp1(0,0,0)rp0(2.5,2.5,3)rp1(3,3,3.5)tin(.2)tout(1.5)
				dur(10)color0(1,1,1)spin(2)segments(20)rotate(0,0,70)
				irotate(0,30,30)bone_orient()";
			sfx start #POP;

			sfx create cylinder #TARGET 
				"texture(b_sfx_bluestars_01)alpha(1)hp0(-.3,-.3,3.5)
				hp1(.3,.3,0)rp0(2.75,2.75,3)rp1(2.75,2.75,3)tin(.2)
				tout(1.5)dur(10)color0(1,1,1)spin(-2)segments(20)rotate(0,0,70)
				irotate(0,30,30)bone_orient()";
			sfx start #POP;





		]];
}

[effect_script*] // -ET
{
	name	=cyl_test;

	script =[[ // liked orangeflare_02 rock_multiple_01 sparkle01
			set $texture b_sfx_sparkle01;
			set $width .4;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(1,0,.5)
				spin(-6)segments(20)bone_orient()irotate(150,0,0)rotate(150,0,270)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(.5,1,0)
				spin(-4)segments(20)bone_orient()irotate(120,30,0)rotate(120,30,270)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(0,.5,1)
				spin(-2)segments(20)bone_orient()irotate(90,60,0)rotate(90,60,270)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(0,1,.5)
				spin(2)segments(20)bone_orient()irotate(60,90,0)rotate(60,90,270)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(.5,0,1)
				spin(4)segments(20)bone_orient()irotate(30,120,0)rotate(30,120,270)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(1,.5,0)
				spin(6)segments(20)bone_orient()irotate(0,150,0)rotate(0,150,270)";
			sfx start #POP;


		]];
}

[effect_script*] // -ET
{
	name	=cyl_test2;

	script =[[
			set $texture b_sfx_diamondring01;

			set $width .8;
			set $detail 8;
			set $duration 10;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,100,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,115,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.9,0,.1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,130,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.8,0,.2)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,145,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.7,0,.3)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,160,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.6,0,.4)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,175,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,0,.5)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,190,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.4,0,.6)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,205,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.3,0,.7)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,220,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.2,0,.8)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,235,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.1,0,.9)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,250,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,265,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,280,0)";
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=cyl_test3;

	script =[[
			set $texture b_sfx_lightray01;
			set $dur 5;


			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp1(0,0,0)hp0(4,1,-1)rp0(.5,1.5,.33)
				rp1(.5,.5,.33)tin(.2)tout(1.5)dur($dur)color0(1,.5,.5)
				spin(-6)segments(20)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp1(0,0,0)hp0(3,1,-.66)rp0(1,3,.66)
				rp1(1,1,.66)tin(.2)tout(1.5)dur($dur)color0(1,.5,1)
				spin(-4)segments(20)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.5)hp1(0,0,0)hp0(2,1,-.33)rp0(1.5,4.5,1)
				rp1(1.5,1.5,1)tin(.2)tout(1.5)dur($dur)color0(.5,.5,1)
				spin(2)segments(20)";
			sfx start #POP;

			sfx create explosion #TARGET 
				"dur($dur)texture(b_sfx_sparkle01)color0(.75,.5,.75)
				color1(.25,0,.25)srate(.1)";
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=cyl_test4;

	script =[[
			set $texture b_sfx_diamondring01;
			//set $texture b_sfx_metal_iron_01

			set $width .5;
			set $detail 4;
			set $duration 10;

			//sfx create cylinder -texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(1,.5,.5)spin(-6)segments(20)bone_orient()irotate(0,0,180)rotate(0,0,0) #TARGET
			//sfx start #POP
			//sfx create cylinder -texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(1,.5,1)spin(-4)segments(20)bone_orient()irotate(180,0,0)rotate(0,0,270) #TARGET
			//sfx start #POP
			//sfx create cylinder -texture($texture)alpha(.5)hp0(-$width,-$width,0)hp1($width,$width,1)rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur(3)color0(.5,.5,1)spin(-2)segments(20)bone_orient()irotate(0,0,180)rotate(0,90,0) #TARGET
			//sfx start #POP

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(10,0,180)
				rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.5,0)
				spin(-2)segments($detail)bone_orient()irotate(20,0,180)
				rotate(0,30,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,1,0)
				spin(-2)segments($detail)bone_orient()irotate(30,0,180)
				rotate(0,60,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,1,0)
				spin(-2)segments($detail)bone_orient()irotate(40,0,180)
				rotate(0,90,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,0)
				spin(-2)segments($detail)bone_orient()irotate(50,0,180)
				rotate(0,120,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,.5)
				spin(-2)segments($detail)bone_orient()irotate(60,0,180)
				rotate(0,150,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,1)
				spin(-2)segments($detail)bone_orient()irotate(70,0,180)
				rotate(0,180,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,.5,1)
				spin(-2)segments($detail)bone_orient()irotate(80,0,180)
				rotate(0,210,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-2)segments($detail)bone_orient()irotate(90,0,180)
				rotate(0,240,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,0,1)
				spin(-2)segments($detail)bone_orient()irotate(100,0,180)
				rotate(0,270,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,1)
				spin(-2)segments($detail)bone_orient()irotate(110,0,180)
				rotate(0,300,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,.5)
				spin(-2)segments($detail)bone_orient()irotate(120,0,180)
				rotate(0,330,0)";
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=cyl_test5;

	script =[[
			set $texture b_sfx_sparkle01;
			set $width .4;
			set $detail 16;
			set $duration 10;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.5,0)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,30,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,1,0)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,60,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,1,0)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,90,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,0)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,120,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,.5)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,150,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,1)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,180,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,.5,1)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,210,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,240,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,0,1)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,270,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,1)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,300,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,.5)
				spin(-2)segments($detail)bone_orient()irotate(60,60,180)
				rotate(0,330,0)";
			sfx start #POP;

		]];
}
[effect_script*] // -ET
{
	name	=cyl_test6;

	script =[[
			set $texture b_sfx_ring_01;
			set $width .6;
			set $detail 16;
			set $duration 3;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(0,90,90)
				rotate(0,90,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.3,.3)
				spin(-2)segments($detail)bone_orient()irotate(0,90,90)
				rotate(0,90,90)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.6,.6)
				spin(-2)segments($detail)bone_orient()irotate(0,90,90)
				rotate(0,90,180)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.3,.3)
				spin(-2)segments($detail)bone_orient()irotate(0,90,90)
				rotate(0,90,270)";


			sfx start #POP;


		]];
}

[effect_script*] // -ET
{
	name	=cyl_test7;

	script =[[
			set $texture b_sfx_ring_01;
			set $height1 -1;
			set $height2 1;
			set $detail 20;
			set $duration 10;
			set $radius1 0;
			set $radius2 .5;
			set $speed 2;
			set $scale .4;

			sfx create cylinder #TARGET 
				"scale($scale)ts($speed)offset(0,0,0)texture($texture)
				alpha(1)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0(.8,1,.8)spin(-2)segments($detail)
				bone_orient()irotate(0,180,180)rotate(0,0,90)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx offset_bone #PEEK v<0 0 1> target;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale)ts($speed)offset(0,0,0)texture($texture)
				alpha(1)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0(.6,1,.6)spin(-2)segments($detail)
				bone_orient()irotate(0,180,180)rotate(60,0,90)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx offset_bone #PEEK v<0 0 1> target;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale)ts($speed)offset(0,0,0)texture($texture)
				alpha(1)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0(.4,1,.4)spin(-2)segments($detail)
				bone_orient()irotate(0,180,180)rotate(120,0,90)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx offset_bone #PEEK v<0 0 1> target;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale)ts($speed)offset(0,0,0)texture($texture)
				alpha(1)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0(.3,1,.3)spin(-2)segments($detail)
				bone_orient()irotate(0,180,180)rotate(180,0,90)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx offset_bone #PEEK v<0 0 1> target;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale)ts($speed)offset(0,0,0)texture($texture)
				alpha(1)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0(.5,1,.5)spin(-2)segments($detail)
				bone_orient()irotate(0,180,180)rotate(240,0,90)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx offset_bone #PEEK v<0 0 1> target;
			sfx start #POP;
			sfx create cylinder #TARGET 
				"scale($scale)ts($speed)offset(0,0,0)texture($texture)
				alpha(1)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0(.7,1,.7)spin(-2)segments($detail)
				bone_orient()irotate(0,180,180)rotate(300,0,90)";
			sfx attach_point #PEEK @weapon_bone target;
			sfx offset_bone #PEEK v<0 0 1> target;
			sfx start #POP;


		]];
}
[effect_script*] // -ET
{
	name	=cyl_test8;

	script =[[
			set $texture b_sfx_ring_01;

			set $width .8;
			set $detail 16;
			set $duration 10;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(6)segments($detail)bone_orient()irotate(0,0,30)
				rotate(0,100,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,.5,0)
				spin(4)segments($detail)bone_orient()irotate(0,0,60)
				rotate(0,160,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,0)
				spin(2)segments($detail)bone_orient()irotate(0,0,90)
				rotate(0,220,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,.5,.5)
				spin(-2)segments($detail)bone_orient()irotate(0,0,120)
				rotate(0,280,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-4)segments($detail)bone_orient()irotate(0,0,150)
				rotate(0,340,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,0,.5)
				spin(-6)segments($detail)bone_orient()irotate(0,0,180)
				rotate(0,40,0)";
			sfx start #POP;

		]];
}



[effect_script*] // -ET
{
	name	=cyl_test9;

	script =[[
			set $texture b_sfx_ring_01;
			set $width 1;
			set $detail 20;
			set $duration 10;
			set $radius1 1;
			set $radius2 1;
			set $speed .5;

			sfx create cylinder #TARGET 
				"ts($speed)offset(0,0,0)texture($texture)alpha(.3)hp0(-$width,-$width,0)
				hp1($width,$width,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)
				tin(.2)tout(1.5)dur($duration)color0(1,1,1)spin(-2)
				segments($detail)bone_orient()irotate(0,0,180)rotate(0,0,90)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"ts($speed)offset(0,0,0)texture($texture)alpha(.3)hp0(-$width,-$width,0)
				hp1($width,$width,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)
				tin(.2)tout(1.5)dur($duration)color0(1,1,.8)spin(-2)
				segments($detail)bone_orient()irotate(0,0,180)rotate(60,0,90)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"ts($speed)offset(0,0,0)texture($texture)alpha(.3)hp0(-$width,-$width,0)
				hp1($width,$width,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)
				tin(.2)tout(1.5)dur($duration)color0(1,1,.6)spin(-2)
				segments($detail)bone_orient()irotate(0,0,180)rotate(120,0,90)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"ts($speed)offset(0,0,0)texture($texture)alpha(.3)hp0(-$width,-$width,0)
				hp1($width,$width,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)
				tin(.2)tout(1.5)dur($duration)color0(1,1,.4)spin(-2)
				segments($detail)bone_orient()irotate(0,0,180)rotate(180,0,90)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"ts($speed)offset(0,0,0)texture($texture)alpha(.3)hp0(-$width,-$width,0)
				hp1($width,$width,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)
				tin(.2)tout(1.5)dur($duration)color0(1,1,.2)spin(-2)
				segments($detail)bone_orient()irotate(0,0,180)rotate(240,0,90)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"ts($speed)offset(0,0,0)texture($texture)alpha(.3)hp0(-$width,-$width,0)
				hp1($width,$width,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)
				tin(.2)tout(1.5)dur($duration)color0(1,1,0)spin(-2)
				segments($detail)bone_orient()irotate(0,0,180)rotate(300,0,90)";
			sfx start #POP;


		]];
}

[effect_script*] // -ET
{
	name	=cyl_test10;

	script =[[
			set $texture b_sfx_splotches_02;
			set $width .4;
			set $detail 16;
			set $duration 10;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.5,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(30,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,1,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(60,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,1,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(90,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(120,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,.5)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(150,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(180,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,.5,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(210,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(240,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(270,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(300,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,.5)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(330,0,0)";
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=cyl_test11;

	script =[[
			set $texture b_sfx_sparkle_02;
			set $width .4;
			set $detail 16;
			set $duration 10;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,330)
				rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,.5,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,300)
				rotate(30,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,1,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,270)
				rotate(60,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,1,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,240)
				rotate(90,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,0)
				spin(-2)segments($detail)bone_orient()irotate(0,0,210)
				rotate(120,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,.5)
				spin(-2)segments($detail)bone_orient()irotate(0,0,180)
				rotate(150,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,1,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,150)
				rotate(180,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,.5,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,120)
				rotate(210,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(0,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,90)
				rotate(240,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(.5,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,60)
				rotate(270,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,1)
				spin(-2)segments($detail)bone_orient()irotate(0,0,30)
				rotate(300,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0(-$width,-$width,0)hp1($width,$width,1)
				rp0(1,1,0)rp1(1,1,0)tin(.2)tout(1.5)dur($duration)color0(1,0,.5)
				spin(-2)segments($detail)bone_orient()irotate(0,0,0)
				rotate(330,0,0)";
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=cyl_test12;

	script =[[
			set $texture b_sfx_star_01;
			set $height1 -1;
			set $height2 1;
			set $detail 20;
			set $duration 60;
			set $radius1 .5;
			set $radius2 2;
			set $speed 2;
			set $scale .4;
			set $spin 0;

	       	set $color0 1,0,0;
	        set $color1 1,.5,0;
	        set $color2 1,1,0;
	        set $color3 .5,1,0;
	        set $color4 0,1,0;
	        set $color5 0,1,.5;
	        set $color6 0,1,1;
	       	set $color7 0,.5,1;
	        set $color8 0,0,1;
	        set $color9 .5,0,1;
	        set $color10 1,0,1;
	        set $color11 1,0,.5;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color0)spin($spin)segments($detail)
				bone_orient()irotate(330,0,0)rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color1)spin($spin)segments($detail)
				bone_orient()irotate(300,0,0)rotate(30,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color2)spin($spin)segments($detail)
				bone_orient()irotate(270,0,0)rotate(60,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color3)spin($spin)segments($detail)
				bone_orient()irotate(240,0,0)rotate(90,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color4)spin($spin)segments($detail)
				bone_orient()irotate(210,0,0)rotate(120,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color5)spin($spin)segments($detail)
				bone_orient()irotate(180,0,0)rotate(150,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color6)spin($spin)segments($detail)
				bone_orient()irotate(150,0,0)rotate(180,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color7)spin($spin)segments($detail)
				bone_orient()irotate(120,0,0)rotate(210,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color8)spin($spin)segments($detail)
				bone_orient()irotate(90,0,0)rotate(240,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color9)spin($spin)segments($detail)
				bone_orient()irotate(60,0,0)rotate(270,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color10)spin($spin)segments($detail)
				bone_orient()irotate(30,0,0)rotate(300,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color11)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(330,0,0)";
			sfx start #POP;

		]];
}



[effect_script*] // -ET
{
	name	=cyl_test13;

	script =[[
			set $texture b_sfx_wisps_01;
			set $dur 5;


			sfx create cylinder #TARGET 
				"texture($texture)alpha(.2)hp1(-1,-1,0)hp0(3,2,-.33)
				rp0(.5,.5,.33)rp1(.5,1,.33)tin(.2)tout(1.5)dur($dur)
				color0(.5,.5,1)spin(1)segments(32)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture(b_sfx_lightray01)alpha(.1)hp1(-1,-1,0)hp0(3,2,-.33)
				rp0(.5,.5,.33)rp1(.5,1,.33)tin(.2)tout(1.5)dur($dur)
				color0(.5,.5,1)spin(2)segments(32)";
			sfx start #POP;
		]];
}

[effect_script*] // -ET
{
	name	=cyl_test14;

	script =[[
			set $texture b_sfx_diamondring01;
			set $height1 -1;
			set $height2 1;
			set $detail 20;
			set $duration 10;
			set $radius1 .4;
			set $radius2 .9;
			set $speed 2;
			set $scale .4;
			set $spin -2;

	        //set $color0 1,0,0
	        //set $color1 1,.5,0
	        //set $color2 1,1,0
	        //set $color3 .5,1,0
	        //set $color4 0,1,0
	        //set $color5 0,1,.5
	        //set $color6 0,1,1
	       	//set $color7 0,.5,1
	        //set $color8 0,0,1
	        //set $color9 .5,0,1
	        //set $color10 1,0,1
	        //set $color11 1,0,.5


	        // yellow purple
	        //set $color0 1,0,1
	        //set $color1 1,.1,.8
	        //set $color2 1,.3,.6
	        //set $color3 1,.5,.4
	        //set $color4 1,.7,.2
	        //set $color5 1,.9,.1
	        //set $color6 1,1,0
	       	//set $color7 1,.8,.1
	        //set $color8 1,.6,.3
	        //set $color9 1,.4,.5
	        //set $color10 1,.2,.7
	        //set $color11 1,.1,.9

			// red
			//set $color0 1,1,1
	        //set $color1 1,.8,.8
	        //set $color2 1,.6,.6
	        //set $color3 1,.4,.4
	        //set $color4 1,.2,.2
	        //set $color5 1,.1,.1
	        //set $color6 1,0,0
	       	//set $color7 1,.1,.1
	        //set $color8 1,.3,.3
	        //set $color9 1,.5,.5
	        //set $color10 1,.7,.7
	        //set $color11 1,.9,.9

	        // blue
	        //set $color0 1,1,1
	        //set $color1 .8,.8,1
	        //set $color2 .6,.6,1
	        //set $color3 .4,.4,1
	        //set $color4 .2,.2,1
	        //set $color5 .1,.1,1
	        //set $color6 0,0,1
	       	//set $color7 .1,.1,1
	        //set $color8 .3,.3,1
	        //set $color9 .5,.5,1
	        //set $color10 .7,.7,1
	        //set $color11 .9,.9,1


	        // blue purple orange
	        //set $color0 1,.5,0
	        //set $color1 .8,.4,.1
	        //set $color2 .6,.3,.2
	        //set $color3 .4,.2,.4
	        //set $color4 .2,.1,.6
	        //set $color5 .1,.05,.8
	        //set $color6 0,0,1
	       	//set $color7 .1,.05,.9
	        //set $color8 .3,.15,.7
	        //set $color9 .5,.25,.5
	        //set $color10 .7,.35,.3
	        //set $color11 .9,.45,.1

	        // blue purple orange mixed1
	        //set $color0 1,.5,0
	        //set $color1 .6,.3,.2
	        //set $color2 .8,.4,.1
	        //set $color3 .4,.2,.4
	        //set $color4 .1,.05,.8
	        //set $color5 .2,.1,.6
	        //set $color6 0,0,1
	       	//set $color7 .3,.15,.7
	        //set $color8 .1,.05,.9
	        //set $color9 .5,.25,.5
	        //set $color10 .9,.45,.1
	        //set $color11 .7,.35,.3

	        // blue purple orange mixed2
	        //set $color0 1,.5,0
	        //set $color6 .8,.4,.1
	        //set $color1 .6,.3,.2
	        //set $color7 .4,.2,.4
	        //set $color2 .2,.1,.6
	        //set $color8 .1,.05,.8
	        //set $color3 0,0,1
	       	//set $color9 .1,.05,.9
	        //set $color4 .3,.15,.7
	        //set $color10 .5,.25,.5
	        //set $color5 .7,.35,.3
	        //set $color11 .9,.45,.1

	        // PGB
	        set $color0 1,.75,1;
	        set $color1 .75,1,.75;
	        set $color2 .75,.75,1;
	        set $color3 1,.25,1;
	        set $color4 .25,1,.25;
	        set $color5 .25,.25,1;
	        set $color6 1,0,1;
	       	set $color7 0,1,0;
	        set $color8 0,0,1;
	        set $color9 1,.5,1;
	        set $color10 .5,1,.5;
	        set $color11 .5,.5,1;





			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color0)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(0,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color1)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(30,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color2)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(60,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color3)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(90,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color4)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(120,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color5)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(150,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color6)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(180,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color7)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(210,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color8)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(240,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color9)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(270,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color10)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(300,0,0)";
			sfx start #POP;
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color11)spin($spin)segments($detail)
				bone_orient()irotate(0,0,0)rotate(330,0,0)";
			sfx start #POP;
		]];
}
[effect_script*] // -ET
{
	name	=cyl_test15;

	script =[[
			set $texture b_sfx_moon_01;
			set $height1 -1;
			set $height2 1;
			set $detail 20;
			set $duration 10;
			set $radius1 1;
			set $radius2 1;
			set $speed 2;
			set $scale .4;
			set $spin 4;


			// red
			//set $color0 1,1,1
	        //set $color1 1,.8,.8
	        //set $color2 1,.6,.6
	        //set $color3 1,.4,.4
	        //set $color4 1,.2,.2
	        //set $color5 1,.1,.1
	        //set $color6 1,0,0
	       	//set $color7 1,.1,.1
	        //set $color8 1,.3,.3
	        //set $color9 1,.5,.5
	        //set $color10 1,.7,.7
	        //set $color11 1,.9,.9

	        // red yellow
			set $color0 1,.5,0;
	        set $color1 1,.4,0;
	        set $color2 1,.3,0;
	        set $color3 1,.2,0;
	        set $color4 1,.1,0;
	        set $color5 1,.05,0;
	        set $color6 1,0,0;
	       	set $color7 1,.5,0;
	        set $color8 1,.15,0;
	        set $color9 1,.25,0;
	        set $color10 1,.35,0;
	        set $color11 1,.45,0;

			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color0)spin($spin)segments($detail)
				bone_orient()irotate(10,0,180)rotate(0,0,0)";
			sfx start #POP;
			//sfx create cylinder -texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)tout(1.5)dur($duration)color0($color1)spin($spin)segments($detail)bone_orient()irotate(20,0,180)rotate(30,0,0) #TARGET
			//sfx start #POP
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color2)spin($spin)segments($detail)
				bone_orient()irotate(30,0,180)rotate(60,0,0)";
			sfx start #POP;
			//sfx create cylinder -texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)tout(1.5)dur($duration)color0($color3)spin($spin)segments($detail)bone_orient()irotate(40,0,180)rotate(90,0,0) #TARGET
			//sfx start #POP
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color4)spin($spin)segments($detail)
				bone_orient()irotate(50,0,180)rotate(120,0,0)";
			sfx start #POP;
			//sfx create cylinder -texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)tout(1.5)dur($duration)color0($color5)spin($spin)segments($detail)bone_orient()irotate(60,0,180)rotate(150,0,0) #TARGET
			//sfx start #POP
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color6)spin($spin)segments($detail)
				bone_orient()irotate(70,0,180)rotate(180,0,0)";
			sfx start #POP;
			//sfx create cylinder -texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)tout(1.5)dur($duration)color0($color7)spin($spin)segments($detail)bone_orient()irotate(80,0,180)rotate(210,0,0) #TARGET
			//sfx start #POP
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)
				tout(1.5)dur($duration)color0($color8)spin($spin)segments($detail)
				bone_orient()irotate(90,0,180)rotate(240,0,0)";
			sfx start #POP;
			//sfx create cylinder -texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)tout(1.5)dur($duration)color0($color9)spin($spin)segments($detail)bone_orient()irotate(100,0,180)rotate(270,0,0) #TARGET
			//sfx start #POP
			sfx create cylinder #TARGET 
				"texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)
				rp0($radius1,$radius1,0)rp1($radius2,$radius1,0)tin(.2)
				tout(1.5)dur($duration)color0($color10)spin($spin)segments($detail)
				bone_orient()irotate(110,0,180)rotate(300,0,0)";
			sfx start #POP;
			//sfx create cylinder -texture($texture)alpha(.3)hp0($height1,$height1,0)hp1($height2,$height2,1)rp0($radius1,$radius1,0)rp1($radius2,$radius2,0)tin(.2)tout(1.5)dur($duration)color0($color11)spin($spin)segments($detail)bone_orient()irotate(120,0,180)rotate(330,0,0) #TARGET
			//sfx start #POP

		]];
}


[effect_script*] // -ET
{
	name	=sphere_test;

	script =[[
			set $dur 5;


			sfx create sphere #TARGET 
				"offset(0,3,0)color0(1,.8,1)scale(.5)dur($dur)irotate(2,2,2)
				lines()";
			sfx start #POP;

			sfx create sray #TARGET 
				"offset(0,3,0)dur($dur)radius(.5)lmin(1.5)lmax(1.5)color1(.25,0,.5)
				count(32)";
			sfx start #POP;

			sfx create orbiter #TARGET 
				"offset(0,3,0)dur($dur)itheta(0)iphi(0)radius(0)";
			set $orb #POP;
			sfx start $orb;

			sfx create lightning #TARGET 
				"delay(3)";
			set $bolt #POP;
			sfx target $bolt $orb;
			sfx start $bolt;
		]];
}

[effect_script*] // -ET
{
	name	=fire_test;

	script =[[
			sfx create fire #TARGET
			"texture(b_sfx_splotches_01)ignite()flamesize(2)count(50)
			color0(.6,.3,.2)velocity(0,3,0)accel(0,0,0)alphafade(.5)
			max_displace(0)radius(1)";
			
			
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=mushroom;

	script =[[
			sfx create fire #TARGET
			"dur(5)flamesize(20)count(30)instant()color0(1,.3,.1)
			velocity(0,3,0)accel(0,0,0)alphafade(.05)min_displace(1)
			max_displace(1)min_radius(10)max_radius(20)";
			
			
			sfx start #POP;

			sfx create fire #TARGET
			"dur(5)flamesize(10)instant()count(30)color0(1,.3,.1)
			velocity(0,1,0)accel(0,0,0)alphafade(.05)max_displace(0)
			max_radius(10)";
			
			
			sfx start #POP;



		]];
}

[effect_script*] // -ET
{
	name	=fire_pillar1;

	script =[[
			set $dur1 25;
			set $dur2 20;

			set $height1 2;
			set $height2 4;
			set $height3 6;

			set $radius1 3;
			set $radius2 .3;
			set $radius3 .2;
			set $speed 20;

			set $fade .7;
			set $size 3;

			sfx create orbiter #TARGET 
				"must_update()iphi(0)radius($radius1)iphi(.5)invisible()
				dur($dur1)free()smooth()";
			set $base #POP;
			sfx snap_to_ground $base;
			sfx start $base;


			sfx create orbiter #TARGET 
				"must_update()iphi(0)radius($radius1)iphi(.7)invisible()
				dur($dur1)free()smooth()";
			set $orb #POP;
			sfx rat $orb;
			sfx target $orb $base;
			sfx start $orb;

			frandrange 1 2;
			frandrange -1 -2;
			sfx create orbiter #TARGET 
				"must_update()offset(0,0,0)itheta(#POP)iphi(#POP)radius($radius2)
				invisible()dur($dur1)free()smooth()";
			set $orb2 #POP;
			sfx rat $orb2;
			sfx target $orb2 $orb;
			sfx start $orb2;

			frandrange 1 2;
			frandrange -1 -2;
			sfx create orbiter #TARGET 
				"must_update()offset(0,$height1,0)itheta(#POP)iphi(#POP)
				radius($radius2)invisible()dur($dur1)free()smooth()";
			set $orb3 #POP;
			sfx rat $orb3;
			sfx target $orb3 $orb;
			sfx start $orb3;

			frandrange 1 2;
			frandrange -1 -2;
			sfx create orbiter #TARGET 
				"must_update()offset(0,$height2,0)itheta(#POP)iphi(#POP)
				radius($radius2)invisible()dur($dur1)free()smooth()";
			set $orb4 #POP;
			sfx rat $orb4;
			sfx target $orb4 $orb;
			sfx start $orb4;

			frandrange 1 2;
			frandrange -1 -2;
			sfx create orbiter #TARGET 
				"must_update()offset(0,$height3,0)itheta(#POP)iphi(#POP)
				radius($radius2)invisible()dur($dur1)free()smooth()";
			set $orb5 #POP;
			sfx rat $orb5;
			sfx target $orb5 $orb;
			sfx start $orb5;

			sfx create fire #TARGET 
				"must_update()line()color0(1,.5,.2)dur($dur2)count(10)
				velocity(0,8,0)accel(0,8,0)alphafade(.8)flamesize($size)
				max_radius(6)min_displace(.1)max_displace(1)";
			set $line1 #POP;
			sfx rat $line1;
			sfx target $line1 $orb3;
			sfx target $line1 $orb2;
			sfx start $line1;

			sfx create fire #TARGET 
				"must_update()line()color0(1,.5,.2)dur($dur2)count(10)
				velocity(0,8,0)accel(0,8,0)alphafade(.8)flamesize($size)
				max_radius(6)min_displace(.1)max_displace(1)";
			set $line2 #POP;
			sfx rat $line2;
			sfx target $line2 $orb3;
			sfx target $line2 $orb4;
			sfx start $line2;

			sfx create fire #TARGET 
				"must_update()line()color0(1,.5,.2)dur($dur2)count(10)
				velocity(0,8,0)accel(0,8,0)alphafade(.8)flamesize($size)
				max_radius(6)min_displace(.1)max_displace(1)";
			set $line3 #POP;
			sfx rat $line3;
			sfx target $line3 $orb5;
			sfx target $line3 $orb4;
			sfx start $line3;

			sfx create fire #TARGET 
				"must_update()count(30)radius($radius3)dur($dur2)color0(1,.5,.2)
				color1(0,0,0)alphafade($fade)flamesize($size)max_radius(0)
				velocity(0,$speed,0)accel(0,$speed,0)min_displace(0)
				max_displace(5)";
			set $fire1 #POP;
			sfx rat $fire1;
			sfx target $fire1 $orb2;
			sfx start $fire1;

			sfx create fire #TARGET 
				"must_update()count(30)radius($radius3)dur($dur2)color0(1,.5,.2)
				color1(0,0,0)alphafade($fade)flamesize($size)max_radius(0)
				velocity(0,$speed,0)accel(0,$speed,0)min_displace(-2)
				max_displace(2)";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $orb3;
			sfx start $fire2;

			sfx create fire #TARGET 
				"must_update()count(20)radius($radius3)dur($dur2)color0(1,.5,.2)
				color1(0,0,0)alphafade($fade)flamesize($size)max_radius(0)
				velocity(0,$speed,0)accel(0,$speed,0)min_displace(-2)
				max_displace(2)";
			set $fire3 #POP;
			sfx rat $fire3;
			sfx target $fire3 $orb4;
			sfx start $fire3;

			sfx create fire #TARGET 
				"must_update()count(10)radius($radius3)dur($dur2)color0(1,.5,.2)
				color1(0,0,0)alphafade($fade)flamesize($size)max_radius(0)
				velocity(0,$speed,0)accel(0,$speed,0)min_displace(-2)
				max_displace(2)";
			set $fire4 #POP;
			sfx rat $fire4;
			sfx target $fire4 $orb5;
			sfx start $fire4;



		]];
}

[effect_script*] // -ET
{
	name	=fire_pillar2;

	script =[[
			sound play s_e_spell_fire_pillar_cast at #TARGET_POSITION dist 3 30;

			sound play s_e_burning_large at #TARGET_POSITION dist 3 30 loop;
			set $burning #POP;

			set $height1 2;
			set $height2 4;
			set $height3 6;

			set $radius1 2;
			set $radius2 .6;
			set $speed 10;

			set $fade .35;

			set $size 4;


			//frandrange .2 .3
			sfx create orbiter #TARGET 
				"must_update()invisible()iphi(0)radius($radius1)iphi(.3)
				free()smooth()";
			set $base #POP;
			sfx snap_to_ground $base;
			sfx start $base;

			//frandrange -.6 -.9
			sfx create orbiter #TARGET 
				"must_update()invisible()iphi(0)radius($radius1)iphi(-.9)
				free()smooth()";
			set $orb #POP;
			sfx rat $orb;
			sfx target $orb $base;
			sfx start $orb;

			sfx create fire #TARGET 
				"must_update()offset(0,-.5,0)count(80)radius($radius2)
				color0(1,.4,.2)color1(0,0,0)alphafade($fade)flamesize($size)
				max_radius(2)velocity(0,$speed,0)accel(0,$speed,0)min_displace(0)
				max_displace(5)[0]";
			set $fire1 #POP;
			sfx rat $fire1;
			sfx target $fire1 $orb;
			sfx start $fire1;

			sfx create fire #TARGET 
				"must_update()offset(0,2,0)count(80)radius($radius2)
				color0(1,.4,.2)color1(0,0,0)alphafade($fade)flamesize($size)
				max_radius(2)velocity(0,$speed,0)accel(0,$speed,0)min_displace(-2)
				max_displace(5)";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $orb;
			sfx start $fire2;

			pause [2];

			sfx finish $fire1;
			sfx finish $fire2;
			sound stop $burning;

			pause 2;

			sfx destroy $base;
			sfx destroy $orb;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

		]];
}
[effect_script*] // -ET
{
	name	=fire_cyclone;

	script =[[
			set $height1 2;
			set $height2 4;
			set $height3 6;

			set $radius1 2;
			set $radius2 1.2;
			set $speed 20;

			set $fade .65;

			set $size 5;

			sound play s_e_burning_large at #TARGET_POSITION dist 30 40 loop;
			set $burning #POP;

			//frandrange .2 .3
			sfx create orbiter #TARGET 
				"must_update()invisible()iphi(0)radius($radius1)iphi(.6)
				free()smooth()";
			set $base #POP;
			sfx snap_to_ground $base;
			sfx start $base;

			//frandrange -.6 -.9
			sfx create orbiter #TARGET 
				"must_update()invisible()iphi(0)radius($radius1)iphi(-1.8)
				free()smooth()";
			set $orb #POP;
			sfx rat $orb;
			sfx target $orb $base;
			sfx start $orb;

			sfx create fire #TARGET 
				"must_update()offset(0,-.5,0)count(120)radius($radius2)
				color0(1,.6,.3)color1(0,0,0)alphafade($fade)flamesize($size)
				max_radius(2)velocity(0,-50,0)accel(0,50,0)min_displace(2)
				max_displace(4)";
			set $fire1 #POP;
			sfx rat $fire1;
			sfx target $fire1 $orb;
			sfx start $fire1;

			sfx create fire #TARGET 
				"must_update()offset(0,2,0)count(120)radius($radius2)
				color0(1,.4,.1)color1(0,0,0)alphafade($fade)flamesize($size)
				max_radius(2)velocity(0,50,0)accel(0,-50,0)min_displace(-2)
				max_displace(6)[0]";
			set $fire2 #POP;
			sfx rat $fire2;
			sfx target $fire2 $orb;
			sfx start $fire2;

			pause [2];

			sfx finish $fire1;
			sfx finish $fire2;
			sound stop $burning;

			pause 2;

			sfx destroy $base;
			sfx destroy $orb;

			worldmsg WE_SPELL_SYNC_END #OWNER_GOID #OWNER_GOID #TARGET_GOID;

		]];
}

[effect_script*] // -ET
{
	name	=kill;

	script	=[[

			set $radius1 0,3,3;
			set $radius2 .4,3.4,3.4;

			
			sfx create flurry #TARGET
			"must_update()count(50)tin(0)tout(.5)dur(0.5)color0(1,.5,.3)
			grow_params(0,4,5)";
			
			
			sfx start #POP;

			sfx create explosion #TARGET 
				"must_update()texture(b_sfx_sparkle01)omni_dir()vmin(10)
				vmax(12)ts(.5)count(100)dur(3)scale(.75)color0(1,.5,.3)
				color1(0,0,0)rvel(0,2,0)ivel(0,0,0)";
			sfx start #POP;

			camerashake camera_stomp s<frequency=20&magnitude_x=0&magnitude_y=.1&magnitude_z=0&duration=1&epicenter=#TARGET_GOID>;

			sfx create cylinder #TARGET
				"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(1)
				hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
				dur(.5)color0(1,.5,.3)segments(24)scale(1.25)";
			sfx start #POP;

			pause .13;

			sfx create cylinder #TARGET
				"must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)alpha(1)
				hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
				dur(.5)color0(1,.5,.3)segments(24)scale(.75)";	
			sfx start #POP;
			
			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;
			]];
}

[effect_script*] // -ET
{
	name	=gremal_retribution;

	script =[[
			sound play s_e_spell_shock_wave_cast at #TARGET_POSITION dist 3 45;

			set $radius1 0,3,6;
			set $radius2 0,4,8;

			sfx create flurry #TARGET
			"offset(0,.75,0)must_update()count(50)tin(0)tout(0)dur(0.2)
			color0(1,1,.7)grow_params(.5,.5,0)";
			
			
			sfx start #POP;

			pause .2;

			worldmsg WE_SPELL_SYNC_MID #INVALID_GOID #OWNER_GOID #TARGET_GOID;

			sfx create flurry #TARGET
			"offset(0,.75,0)must_update()count(50)tin(0)tout(.5)
			dur(0.5)color0(1,1,.7)grow_params(0,4,5)";
			
			
			sfx start #POP;

			sfx create explosion #TARGET 
				"offset(0,.75,0)must_update()texture(b_sfx_sparkle01)
				omni_dir()vmin(10)vmax(12)ts(.5)count(100)dur(3)scale(.75)
				color0(1,1,.7)color1(0,0,0)rvel(0,2,0)ivel(0,0,0)";
			sfx start #POP;

			camerashake camera_stomp s<frequency=20&magnitude_x=0&magnitude_y=.1&magnitude_z=0&duration=1&epicenter=#TARGET_GOID>;

			sfx create cylinder #TARGET
			"offset(0,.75,0)must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)
			alpha(1)hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
			dur(.5)color0(1,1,.7)segments(24)";
			
				
			sfx start #POP;

			pause .1;

			sfx create cylinder #TARGET
			"offset(0,.75,0)must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)
			alpha(1)hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
			dur(.5)color0(1,1,.7)segments(24)";
			
				
			sfx start #POP;

			pause .1;

			sfx create cylinder #TARGET
			"offset(0,.75,0)must_update()tin(.1)tout(.4)texture(b_sfx_cyl_03)
			alpha(1)hp0(0,0,0)hp1(0,0,0)spin(16)rp0($radius1)rp1($radius2)
			dur(.5)color0(1,1,.7)segments(24)";
			
				
			sfx start #POP;
		]];
}

[effect_script*] // -ET
{
	name	=gremal_sacrifice;

	script =[[
			sound play s_e_die_gremal at #TARGET_POSITION;

			sfx create fire #TARGET
				"scale(.5)offset(0,.2,0)instant()dur(.66)flamesize(2)
				count(50)color0(1,.3,.1)color1(0,0,0)velocity(0,20,0)
				accel(0,16,0)alphafade(0.65)min_displace(0)max_displace(0)
				min_radius(0)max_radius(5)";
				
				
			sfx snap_to_ground #PEEK;
			sfx start #POP;

			sfx create explosion #TARGET
				"offset(0,.2,0)ts(.3)scale(.3)dur(1)vmin(2)vmax(4)rvel(4,4,4)
				scale_range(.5,.9,0)color0(1,.3,.1)color1(.2,0,0)dur(2)
				radius(.4)fade_range(0,1,0)count(30)";
				
				
			sfx snap_to_ground #PEEK;
			sfx start #POP;

			sfx create orbiter #TARGET
				"dur(1)model_sin(.5)model_sout(.5)model_smax(.66)radius(0)
				offset(0,.2,0)model(gremal_effect)";
				
				
			sfx snap_to_ground #PEEK;
			sfx start #POP;

		]];
}

[effect_script*] // -ET
{
	name	=gremal_savior;

	script =[[
			sound play s_e_env_shrine_health at #TARGET_POSITION;

			sfx create orbiter #TARGET
				"offset(0,1,0)vdisplace(5)dur(5)model_sin(.5)model_sout(2)
				model_smax(.66)radius(0)offset(0,.2,0)model(gremal_effect)";
				
				
			set $gremal #POP;
			sfx start $gremal;

			sfx create sray #TARGET 
				"dur(5)offset(0,.1,.1)scale(.5)radius(.8)lmin(.3)lmax(.4)
				color0(1,1,.7)color1(0,0,0)count(20)";
			sfx rat #PEEK;
			sfx target #PEEK $gremal;
			sfx start #POP;
		]];
}
